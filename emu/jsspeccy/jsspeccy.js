/*! For license information please see jsspeccy.js.LICENSE.txt */
(()=>{var t={742:(t,e)=>{"use strict";e.byteLength=function(t){var e=h(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,s=h(t),o=s[0],a=s[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,o,a)),l=0,f=a>0?o-4:o;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,u[l++]=255&e),1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],o=16383,a=0,h=n-i;a<h;a+=o)s.push(u(t,a,a+o>h?h:a+o));return 1===i?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,n){for(var i,s,o=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},764:(t,e,r)=>{"use strict";const n=r(742),i=r(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=h,e.h2=50;const o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,h.prototype),e}function h(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|g(t,e);let n=a(r);const i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return d(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return d(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return h.from(n,e,r);const i=function(t){if(h.isBuffer(t)){const e=0|p(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||K(t.length)?a(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return h.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return l(t),a(t<0?0:0|p(t))}function c(t){const e=t.length<0?0:0|p(t.length),r=a(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function d(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,h.prototype),n}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function g(t,e){if(h.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(i)return n?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return U(this,e,r);case"latin1":case"binary":return C(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function w(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let s,o=1,a=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===h)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){let r=!0;for(let n=0;n<h;n++)if(u(t,s+n)!==u(e,n)){r=!1;break}if(r)return s}return-1}function _(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(K(n))return o;t[r+o]=n}return o}function v(t,e,r,n){return J(V(e,t.length-r),t,r,n)}function x(t,e,r,n){return J(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function k(t,e,r,n){return J(Y(e),t,r,n)}function E(t,e,r,n){return J(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,a,h;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(h=(31&e)<<6|63&r,h>127&&(s=h));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(h=(15&e)<<12|(63&r)<<6|63&n,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(h=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}h.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},h.allocUnsafe=function(t){return f(t)},h.allocUnsafeSlow=function(t){return f(t)},h.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==h.prototype},h.compare=function(t,e){if(q(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(t)||!h.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=h.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(q(e,Uint8Array))i+e.length>n.length?(h.isBuffer(e)||(e=h.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!h.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},h.byteLength=g,h.prototype._isBuffer=!0,h.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},h.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},h.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},h.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?B(this,0,t):m.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(t){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===h.compare(this,t)},h.prototype.inspect=function(){let t="";const r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(h.prototype[s]=h.prototype.inspect),h.prototype.compare=function(t,e,r,n,i){if(q(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const a=Math.min(s,o),u=this.slice(n,i),l=t.slice(e,r);for(let t=0;t<a;++t)if(u[t]!==l[t]){s=u[t],o=l[t];break}return s<o?-1:o<s?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return w(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return w(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return _(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return x(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function U(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function C(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function O(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=G[t[n]];return i}function I(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function L(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,r,n,i,s){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function z(t,e,r,n,i){Z(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function R(t,e,r,n,i){Z(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function N(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,s){return e=+e,r>>>=0,s||N(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function P(t,e,r,n,s){return e=+e,r>>>=0,s||N(t,0,r,8),i.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUintLE=h.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},h.prototype.readUintBE=h.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},h.prototype.readUint8=h.prototype.readUInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),this[t]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(t,e){return t>>>=0,e||L(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readBigUInt64LE=X((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=X((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||L(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},h.prototype.readInt8=function(t,e){return t>>>=0,e||L(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){t>>>=0,e||L(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return t>>>=0,e||L(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readBigInt64LE=X((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),h.prototype.readBigInt64BE=X((function(t){$(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||H(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),h.prototype.readFloatLE=function(t,e){return t>>>=0,e||L(t,4,this.length),i.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return t>>>=0,e||L(t,4,this.length),i.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return t>>>=0,e||L(t,8,this.length),i.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return t>>>=0,e||L(t,8,this.length),i.read(this,t,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||T(this,t,e,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||T(this,t,e,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},h.prototype.writeUint8=h.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,255,0),this[e]=255&t,e+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigUInt64LE=X((function(t,e=0){return z(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=X((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);T(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);T(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},h.prototype.writeBigInt64LE=X((function(t,e=0){return z(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=X((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return P(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return P(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(!h.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},h.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=h.isBuffer(t)?t:h.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const D={};function M(t,e,r){D[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Z(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new D.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){$(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||H(e,t.length-(r+1))}(n,i,s)}function $(t,e){if("number"!=typeof t)throw new D.ERR_INVALID_ARG_TYPE(e,"number",t)}function H(t,e,r){if(Math.floor(t)!==t)throw $(t,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=j(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function V(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function Y(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function J(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}const G=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function X(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},187:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,s),n(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function h(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function u(t,e,r,n){var i,s,o,u;if(a(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),void 0===o)o=s[e]=r,++t._eventsCount;else if("function"==typeof o?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=h(t))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function c(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){n.once&&t.removeEventListener(e,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return h(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i="error"===t,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var h=s[t];if(void 0===h)return!1;if("function"==typeof h)n(h,this,e);else{var u=h.length,l=p(h,u);for(r=0;r<u;++r)n(l[r],this,e)}return!0},s.prototype.addListener=function(t,e){return u(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return u(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,s,o;if(a(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return c(this,t,!0)},s.prototype.rawListeners=function(t){return c(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},171:(t,e,r)=>{"use strict";var n,i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=document.createElement("input");return"object"===s(e[0])&&(!0===e[0].multiple&&n.setAttribute("multiple",""),void 0!==e[0].accept&&n.setAttribute("accept",e[0].accept)),n.setAttribute("type","file"),n.style.display="none",n.setAttribute("id","hidden-file"),document.body.appendChild(n),new Promise((function(t){n.addEventListener("change",(function(){t(n.files);var r=e[e.length-1];"function"==typeof r&&r(n.files),document.body.removeChild(n)}));var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}))},void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)},645:(t,e)=>{e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,h=(1<<a)-1,u=h>>1,l=-7,f=r?i-1:0,c=r?-1:1,d=t[e+f];for(f+=c,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+t[e+f],f+=c,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+t[e+f],f+=c,l-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=u}return(d?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,h,u=8*s-i-1,l=(1<<u)-1,f=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+f>=1?c/h:c*Math.pow(2,1-f))*h>=2&&(o++,h/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(e*h-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*g}},733:(t,e,r)=>{t.exports=function t(e,r,n){function i(o,a){if(!r[o]){if(!e[o]){if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=r[o]={exports:{}};e[o][0].call(u.exports,(function(t){return i(e[o][1][t]||t)}),u,u.exports,t,e,r,n)}return r[o].exports}for(var s=void 0,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,o,a,h,u,l=[],f=0,c=t.length,d=c,p="string"!==n.getTypeOf(t);f<t.length;)d=c-f,i=p?(e=t[f++],r=f<c?t[f++]:0,f<c?t[f++]:0):(e=t.charCodeAt(f++),r=f<c?t.charCodeAt(f++):0,f<c?t.charCodeAt(f++):0),o=e>>2,a=(3&e)<<4|r>>4,h=1<d?(15&r)<<2|i>>6:64,u=2<d?63&i:64,l.push(s.charAt(o)+s.charAt(a)+s.charAt(h)+s.charAt(u));return l.join("")},r.decode=function(t){var e,r,n,o,a,h,u=0,l=0,f="data:";if(t.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var c,d=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===s.charAt(64)&&d--,t.charAt(t.length-2)===s.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(c=i.uint8array?new Uint8Array(0|d):new Array(0|d);u<t.length;)e=s.indexOf(t.charAt(u++))<<2|(o=s.indexOf(t.charAt(u++)))>>4,r=(15&o)<<4|(a=s.indexOf(t.charAt(u++)))>>2,n=(3&a)<<6|(h=s.indexOf(t.charAt(u++))),c[l++]=e,64!==a&&(c[l++]=r),64!==h&&(c[l++]=n);return c}},{"./support":30,"./utils":32}],2:[function(t,e,r){"use strict";var n=t("./external"),i=t("./stream/DataWorker"),s=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function a(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}a.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,r){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,r,n){var s=i,o=0+r;t^=-1;for(var a=0;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}(0|e,t,t.length):function(t,e,r,n){var s=i,o=0+r;t^=-1;for(var a=0;a<o;a++)t=t>>>8^s[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){"use strict";var n;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),s=t("./utils"),o=t("./stream/GenericWorker"),a=n?"uint8array":"array";function h(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",s.inherits(h,o),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,t.data),!1)},h.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new h("Deflate",t)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){"use strict";function n(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n}function i(t,e,r,i,o,l){var f,c,d=t.file,p=t.compression,g=l!==a.utf8encode,m=s.transformTo("string",l(d.name)),y=s.transformTo("string",a.utf8encode(d.name)),w=d.comment,b=s.transformTo("string",l(w)),_=s.transformTo("string",a.utf8encode(w)),v=y.length!==d.name.length,x=_.length!==w.length,k="",E="",S="",B=d.dir,A=d.date,U={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(U.crc32=t.crc32,U.compressedSize=t.compressedSize,U.uncompressedSize=t.uncompressedSize);var C=0;e&&(C|=8),g||!v&&!x||(C|=2048);var O=0,I=0;B&&(O|=16),"UNIX"===o?(I=798,O|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(d.unixPermissions,B)):(I=20,O|=function(t){return 63&(t||0)}(d.dosPermissions)),f=A.getUTCHours(),f<<=6,f|=A.getUTCMinutes(),f<<=5,f|=A.getUTCSeconds()/2,c=A.getUTCFullYear()-1980,c<<=4,c|=A.getUTCMonth()+1,c<<=5,c|=A.getUTCDate(),v&&(E=n(1,1)+n(h(m),4)+y,k+="up"+n(E.length,2)+E),x&&(S=n(1,1)+n(h(b),4)+_,k+="uc"+n(S.length,2)+S);var L="";return L+="\n\0",L+=n(C,2),L+=p.magic,L+=n(f,2),L+=n(c,2),L+=n(U.crc32,4),L+=n(U.compressedSize,4),L+=n(U.uncompressedSize,4),L+=n(m.length,2),L+=n(k.length,2),{fileRecord:u.LOCAL_FILE_HEADER+L+m+k,dirRecord:u.CENTRAL_FILE_HEADER+n(I,2)+L+n(b.length,2)+"\0\0\0\0"+n(O,4)+n(i,4)+m+k+b}}var s=t("../utils"),o=t("../stream/GenericWorker"),a=t("../utf8"),h=t("../crc32"),u=t("../signature");function l(t,e,r,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(l,o),l.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,o.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return u.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,o){var a=s.transformTo("string",o(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(r,4)+n(a.length,2)+a}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},l.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!o.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},l.prototype.lock=function(){o.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var s=new i(e.streamFiles,r,e.platform,e.encodeFileName),o=0;try{t.forEach((function(t,r){o++;var i=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,e.compression),a=r.options.compressionOptions||e.compressionOptions||{},h=r.dir,u=r.date;r._compressWorker(i,a).withStreamInfo("file",{name:t,dir:h,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(t){s.error(t)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./external"),s=t("./utf8"),o=t("./zipEntries"),a=t("./stream/Crc32Probe"),h=t("./nodejsUtils");function u(t){return new i.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new a);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),h.isNode&&h.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new o(e);return r.load(t),r})).then((function(t){var r=[i.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var s=0;s<n.length;s++)r.push(u(n[s]));return i.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,s=0;s<i.length;s++){var o=i[s];r.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker");function s(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(s,i),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,r){"use strict";function n(t,e,r){var n,i=s.getTypeOf(e),a=s.extend(r||{},h);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=g(t)),a.createFolders&&(n=p(t))&&m.call(this,n,!0);var f="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!f),(e instanceof u&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",i="string");var y;y=e instanceof u||e instanceof o?e:c.isNode&&c.isStream(e)?new d(t,e):s.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var w=new l(t,y,a);this.files[t]=w}var i=t("./utf8"),s=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),h=t("./defaults"),u=t("./compressedObject"),l=t("./zipObject"),f=t("./generate"),c=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},m=function(t,e){return e=void 0!==e?e:h.createFolders,t=g(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function y(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n)},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,r),this;if(y(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var s=this.files[this.root+t];return s&&!s.dir?s:null},folder:function(t){if(!t)return this;if(y(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=m.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=s.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");s.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";e=f.generateWorker(this,r,n)}catch(t){(e=new o("error")).error(t)}return new a(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&n===s[2]&&i===s[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){"use strict";var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){"use strict";var n=t("./ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../support"),s=t("./ArrayReader"),o=t("./StringReader"),a=t("./NodeBufferReader"),h=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new a(t):i.uint8array?new h(n.transformTo("uint8array",t)):new s(n.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../utils");function s(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(s,n),s.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../crc32");function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(s,n),s.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(s,i),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function s(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./ConvertWorker"),s=t("./GenericWorker"),o=t("../base64"),a=t("../support"),h=t("../external"),u=null;if(a.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function l(t,e,r){var o=e;switch(e){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=e,this._mimeType=r,n.checkSupport(o),this._worker=t.pipe(new i(o)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}l.prototype={accumulate:function(t){return function(t,e){return new h.Promise((function(r,i){var s=[],a=t._internalType,h=t._outputType,u=t._mimeType;t.on("data",(function(t,r){s.push(t),e&&e(r)})).on("error",(function(t){s=[],i(t)})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),r);case"base64":return o.encode(e);default:return n.transformTo(t,e)}}(h,function(t,e){var r,n=0,i=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(s),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,s),u);r(t)}catch(t){i(t)}s=[]})).resume()}))}(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof Buffer,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),s=t("./nodejsUtils"),o=t("./stream/GenericWorker"),a=new Array(256),h=0;h<256;h++)a[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function l(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,r.utf8encode=function(t){return i.nodebuffer?s.newBufferFrom(t,"utf-8"):function(t){var e,r,n,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),h+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(h):new Array(h),s=o=0;o<h;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(n-56320),s++),r<128?e[o++]=r:(r<2048?e[o++]=192|r>>>6:(r<65536?e[o++]=224|r>>>12:(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63),e[o++]=128|r>>>6&63),e[o++]=128|63&r);return e}(t)},r.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,s,o=t.length,h=new Array(2*o);for(e=r=0;e<o;)if((i=t[e++])<128)h[r++]=i;else if(4<(s=a[i]))h[r++]=65533,e+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&e<o;)i=i<<6|63&t[e++],s--;1<s?h[r++]=65533:i<65536?h[r++]=i:(i-=65536,h[r++]=55296|i>>10&1023,h[r++]=56320|1023&i)}return h.length!==r&&(h.subarray?h=h.subarray(0,r):h.length=r),n.applyFromCharCode(h)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(u,o),u.prototype.processChunk=function(t){var e=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=e;(e=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),e.set(s,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var o=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}(e),h=e;o!==e.length&&(i.uint8array?(h=e.subarray(0,o),this.leftOver=e.subarray(o,e.length)):(h=e.slice(0,o),this.leftOver=e.slice(o,e.length))),this.push({data:r.utf8decode(h),meta:t.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=u,n.inherits(l,o),l.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){"use strict";var n=t("./support"),i=t("./base64"),s=t("./nodejsUtils"),o=t("set-immediate-shim"),a=t("./external");function h(t){return t}function u(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,r){var n=[],i=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;i<s;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return l.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return l.stringifyByChar(t)}function c(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=f;var d={};d.string={string:h,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return d.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,s.allocBuffer(t.length))}},d.array={string:f,array:h,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(t)}},d.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return c(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:h,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return s.newBufferFrom(new Uint8Array(t))}},d.uint8array={string:f,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:h,nodebuffer:function(t){return s.newBufferFrom(t)}},d.nodebuffer={string:f,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return d.nodebuffer.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:h},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return d[n][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&s.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){o((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,s,o,h){return a.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var l=r.getTypeOf(e);return l?("arraybuffer"===l?e=r.transformTo("uint8array",e):"string"===l&&(h?e=i.decode(e):s&&!0!==o&&(e=function(t){return u(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),s=t("./signature"),o=t("./zipEntry"),a=(t("./utf8"),t("./support"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(0<n)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),s=t("./compressedObject"),o=t("./crc32"),a=t("./utf8"),h=t("./compressions"),u=t("./support");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(i)},handleUTF8:function(){var t=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var s=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){"use strict";function n(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var i=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),h=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var s=!this._dataBinary;s&&!n&&(e=e.pipe(new o.Utf8EncodeWorker)),!s&&n&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new h("error")).error(t)}return new i(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof h?this._data:new s(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)n.prototype[u[f]]=l;e.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,n){(function(t){"use strict";var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var s=0,o=new i(l),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),r=function(){a.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var h=new t.MessageChannel;h.port1.onmessage=l,r=function(){h.port2.postMessage(0)}}var u=[];function l(){var t,e;n=!0;for(var r=u.length;r;){for(e=u,u=[],t=-1;++t<r;)e[t]();r=u.length}n=!1}e.exports=function(t){1!==u.push(t)||n||r()}}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,r){"use strict";var n=t("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],h=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){n((function(){var n;try{n=e(r)}catch(n){return s.reject(t,n)}n===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,n)}))}function c(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,s.reject(t,e))}function i(e){r||(r=!0,s.resolve(t,e))}var o=p((function(){e(i,n)}));"error"===o.status&&n(o.value)}function p(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}(e.exports=u).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===o)return this;var r=new this.constructor(i);return this.state!==h?f(r,this.state===a?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){s.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},s.resolve=function(t,e){var r=p(c,e);if("error"===r.status)return s.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=a,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},s.reject=function(t,e){t.state=o,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},u.resolve=function(t){return t instanceof this?t:s.resolve(new this(i),t)},u.reject=function(t){var e=new this(i);return s.reject(e,t)},u.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,h=-1,u=new this(i);++h<r;)l(t[h],h);return u;function l(t,i){e.resolve(t).then((function(t){o[i]=t,++a!==r||n||(n=!0,s.resolve(u,o))}),(function(t){n||(n=!0,s.reject(u,t))}))}},u.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,r=!1;if(!e)return this.resolve([]);for(var n,o=-1,a=new this(i);++o<e;)n=t[o],this.resolve(n).then((function(t){r||(r=!0,s.resolve(a,t))}),(function(t){r||(r=!0,s.reject(a,t))}));return a}},{immediate:36}],38:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/messages"),a=t("./zlib/zstream"),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(o[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,l)))throw new Error(o[r]);this._dict_set=!0}}function l(t,e){var r=new u(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result}u.prototype.push=function(t,e){var r,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(r=n.deflate(a,o))&&0!==r)return this.onEnd(r),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==r);return 4===o?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==o||(this.onEnd(0),!(a.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=u,r.deflate=l,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),s=t("./utils/strings"),o=t("./zlib/constants"),a=t("./zlib/messages"),h=t("./zlib/zstream"),u=t("./zlib/gzheader"),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==o.Z_OK)throw new Error(a[r]);this.header=new u,n.inflateGetHeader(this.strm,this.header)}function c(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}f.prototype.push=function(t,e){var r,a,h,u,f,c,d=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof t?d.input=s.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&g&&(c="string"==typeof g?s.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,r=n.inflateSetDictionary(this.strm,c)),r===o.Z_BUF_ERROR&&!0===m&&(r=o.Z_OK,m=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==o.Z_STREAM_END&&(0!==d.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(d.output,d.next_out),u=d.next_out-h,f=s.buf2string(d.output,h),d.next_out=u,d.avail_out=p-u,u&&i.arraySet(d.output,d.output,h,u,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((0<d.avail_in||0===d.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=f,r.inflate=c,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.ungzip=c},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){var e,r,n,i,s,o;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)s=t[e],o.set(s,i),i+=s.length;return o}},s={arraySet:function(t,e,r,n,i){for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],42:[function(t,e,r){"use strict";var n=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function h(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",o=0;o<e;o++)r+=String.fromCharCode(t[o]);return r}o[254]=o[254]=1,r.string2buf=function(t){var e,r,i,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),h+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(h),s=o=0;o<h;s++)55296==(64512&(r=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=t.charCodeAt(s+1)))&&(r=65536+(r-55296<<10)+(i-56320),s++),r<128?e[o++]=r:(r<2048?e[o++]=192|r>>>6:(r<65536?e[o++]=224|r>>>12:(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63),e[o++]=128|r>>>6&63),e[o++]=128|63&r);return e},r.buf2binstring=function(t){return h(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,s,a=e||t.length,u=new Array(2*a);for(r=n=0;r<a;)if((i=t[r++])<128)u[n++]=i;else if(4<(s=o[i]))u[n++]=65533,r+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&r<a;)i=i<<6|63&t[r++],s--;1<s?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return h(u,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,s=t>>>16&65535|0,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;s=s+(i=i+e[n++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16|0}},{}],44:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var s=n,o=i+r;t^=-1;for(var a=i;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,r){"use strict";var n,i=t("../utils/common"),s=t("./trees"),o=t("./adler32"),a=t("./crc32"),h=t("./messages"),u=-2,l=258,f=262,c=113;function d(t,e){return t.msg=h[e],e}function p(t){return(t<<1)-(4<t?9:0)}function g(t){for(var e=t.length;0<=--e;)t[e]=0}function m(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function y(t,e){s._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,m(t.strm)}function w(t,e){t.pending_buf[t.pending++]=e}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function _(t,e){var r,n,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match,h=t.strstart>t.w_size-f?t.strstart-(t.w_size-f):0,u=t.window,c=t.w_mask,d=t.prev,p=t.strstart+l,g=u[s+o-1],m=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(u[(r=e)+o]===m&&u[r+o-1]===g&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<p);if(n=l-(p-s),s=p-l,o<n){if(t.match_start=e,a<=(o=n))break;g=u[s+o-1],m=u[s+o]}}}while((e=d[e&c])>h&&0!=--i);return o<=t.lookahead?o:t.lookahead}function v(t){var e,r,n,s,h,u,l,c,d,p,g=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-f)){for(i.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=r=t.hash_size;n=t.head[--e],t.head[e]=g<=n?n-g:0,--r;);for(e=r=g;n=t.prev[--e],t.prev[e]=g<=n?n-g:0,--r;);s+=g}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,c=t.strstart+t.lookahead,p=void 0,(d=s)<(p=u.avail_in)&&(p=d),r=0===p?0:(u.avail_in-=p,i.arraySet(l,u.input,u.next_in,p,c),1===u.state.wrap?u.adler=o(u.adler,l,p,c):2===u.state.wrap&&(u.adler=a(u.adler,l,p,c)),u.next_in+=p,u.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+3-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<f&&0!==t.strm.avail_in)}function x(t,e){for(var r,n;;){if(t.lookahead<f){if(v(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-f&&(t.match_length=_(t,r)),t.match_length>=3)if(n=s._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}function k(t,e){for(var r,n,i;;){if(t.lookahead<f){if(v(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-f&&(t.match_length=_(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,n=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(y(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=s._tr_tally(t,0,t.window[t.strstart-1]))&&y(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}function E(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function B(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:c,t.adler=2===e.wrap?0:1,e.last_flush=0,s._tr_init(e),0):d(t,u)}function A(t){var e=B(t);return 0===e&&function(t){t.window_size=2*t.w_size,g(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function U(t,e,r,n,s,o){if(!t)return u;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),s<1||9<s||8!==r||n<8||15<n||e<0||9<e||o<0||4<o)return d(t,u);8===n&&(n=9);var h=new S;return(t.state=h).strm=t,h.wrap=a,h.gzhead=null,h.w_bits=n,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new i.Buf8(2*h.w_size),h.head=new i.Buf16(h.hash_size),h.prev=new i.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new i.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=o,h.method=r,A(t)}n=[new E(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(v(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,y(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-f&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(y(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(y(t,!1),t.strm.avail_out),1)})),new E(4,4,8,4,x),new E(4,5,16,8,x),new E(4,6,32,32,x),new E(4,4,16,16,k),new E(8,16,32,32,k),new E(8,16,128,128,k),new E(8,32,128,256,k),new E(32,128,258,1024,k),new E(32,258,258,4096,k)],r.deflateInit=function(t,e){return U(t,e,8,15,8,0)},r.deflateInit2=U,r.deflateReset=A,r.deflateResetKeep=B,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u},r.deflate=function(t,e){var r,i,o,h;if(!t||!t.state||5<e||e<0)return t?d(t,u):u;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return d(t,0===t.avail_out?-5:u);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,w(i,31),w(i,139),w(i,8),i.gzhead?(w(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),w(i,255&i.gzhead.time),w(i,i.gzhead.time>>8&255),w(i,i.gzhead.time>>16&255),w(i,i.gzhead.time>>24&255),w(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),w(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(w(i,255&i.gzhead.extra.length),w(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(w(i,0),w(i,0),w(i,0),w(i,0),w(i,0),w(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),w(i,3),i.status=c);else{var f=8+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=c,b(i,f),0!==i.strstart&&(b(i,t.adler>>>16),b(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),m(t),o=i.pending,i.pending!==i.pending_buf_size));)w(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),m(t),o=i.pending,i.pending===i.pending_buf_size)){h=1;break}h=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,w(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===h&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),m(t),o=i.pending,i.pending===i.pending_buf_size)){h=1;break}h=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,w(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>o&&(t.adler=a(t.adler,i.pending_buf,i.pending-o,o)),0===h&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&m(t),i.pending+2<=i.pending_buf_size&&(w(i,255&t.adler),w(i,t.adler>>8&255),t.adler=0,i.status=c)):i.status=c),0!==i.pending){if(m(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(r)&&4!==e)return d(t,-5);if(666===i.status&&0!==t.avail_in)return d(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var _=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(v(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,o,a=t.window;;){if(t.lookahead<=l){if(v(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){o=t.strstart+l;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);t.match_length=l-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=s._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(y(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(y(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(y(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==_&&4!==_||(i.status=666),1===_||3===_)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===e?s._tr_align(i):5!==e&&(s._tr_stored_block(i,0,0,!1),3===e&&(g(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),m(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(w(i,255&t.adler),w(i,t.adler>>8&255),w(i,t.adler>>16&255),w(i,t.adler>>24&255),w(i,255&t.total_in),w(i,t.total_in>>8&255),w(i,t.total_in>>16&255),w(i,t.total_in>>24&255)):(b(i,t.adler>>>16),b(i,65535&t.adler)),m(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==c&&666!==e?d(t,u):(t.state=null,e===c?d(t,-3):0):u},r.deflateSetDictionary=function(t,e){var r,n,s,a,h,l,f,c,d=e.length;if(!t||!t.state)return u;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return u;for(1===a&&(t.adler=o(t.adler,e,d,0)),r.wrap=0,d>=r.w_size&&(0===a&&(g(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new i.Buf8(r.w_size),i.arraySet(c,e,d-r.w_size,r.w_size,0),e=c,d=r.w_size),h=t.avail_in,l=t.next_in,f=t.input,t.avail_in=d,t.next_in=0,t.input=e,v(r);r.lookahead>=3;){for(n=r.strstart,s=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--s;);r.strstart=n,r.lookahead=2,v(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=f,t.avail_in=h,r.wrap=a,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,s,o,a,h,u,l,f,c,d,p,g,m,y,w,b,_,v,x,k,E,S,B;r=t.state,n=t.next_in,S=t.input,i=n+(t.avail_in-5),s=t.next_out,B=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,c=r.window,d=r.hold,p=r.bits,g=r.lencode,m=r.distcode,y=(1<<r.lenbits)-1,w=(1<<r.distbits)-1;t:do{p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),b=g[d&y];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))B[s++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}v=65535&b,(_&=15)&&(p<_&&(d+=S[n++]<<p,p+=8),v+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),b=m[d&w];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=m[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&b,p<(_&=15)&&(d+=S[n++]<<p,(p+=8)<_&&(d+=S[n++]<<p,p+=8)),h<(x+=d&(1<<_)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,(_=s-o)<x){if(l<(_=x-_)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=c,(k=0)===f){if(k+=u-_,_<v){for(v-=_;B[s++]=c[k++],--_;);k=s-x,E=B}}else if(f<_){if(k+=u+f-_,(_-=f)<v){for(v-=_;B[s++]=c[k++],--_;);if(k=0,f<v){for(v-=_=f;B[s++]=c[k++],--_;);k=s-x,E=B}}}else if(k+=f-_,_<v){for(v-=_;B[s++]=c[k++],--_;);k=s-x,E=B}for(;2<v;)B[s++]=E[k++],B[s++]=E[k++],B[s++]=E[k++],v-=3;v&&(B[s++]=E[k++],1<v&&(B[s++]=E[k++]))}else{for(k=s-x;B[s++]=B[k++],B[s++]=B[k++],B[s++]=B[k++],2<(v-=3););v&&(B[s++]=B[k++],1<v&&(B[s++]=B[k++]))}break}}break}}while(n<i&&s<a);n-=v=p>>3,d&=(1<<(p-=v<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=s<a?a-s+257:257-(s-a),r.hold=d,r.bits=p}},{}],49:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),s=t("./crc32"),o=t("./inffast"),a=t("./inftrees"),h=-2;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):h}function c(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,f(t)):h}function d(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?h:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,c(t))):h}function p(t,e){var r,n;return t?(n=new l,(t.state=n).window=null,0!==(r=d(t,e))&&(t.state=null),r):h}var g,m,y=!0;function w(t){if(y){var e;for(g=new n.Buf32(512),m=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,m,0,t.work,{bits:5}),y=!1}t.lencode=g,t.lenbits=9,t.distcode=m,t.distbits=5}function b(t,e,r,i){var s,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),n.arraySet(o.window,e,r-i,s,o.wnext),(i-=s)?(n.arraySet(o.window,e,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}r.inflateReset=c,r.inflateReset2=d,r.inflateResetKeep=f,r.inflateInit=function(t){return p(t,15)},r.inflateInit2=p,r.inflate=function(t,e){var r,l,f,c,d,p,g,m,y,_,v,x,k,E,S,B,A,U,C,O,I,L,T,z,R=0,N=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,f=t.output,g=t.avail_out,c=t.next_in,l=t.input,p=t.avail_in,m=r.hold,y=r.bits,_=p,v=g,L=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(2&r.wrap&&35615===m){N[r.check=0]=255&m,N[1]=m>>>8&255,r.check=s(r.check,N,2,0),y=m=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&m)<<8)+(m>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&m)){t.msg="unknown compression method",r.mode=30;break}if(y-=4,I=8+(15&(m>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&m?10:12,y=m=0;break;case 2:for(;y<16;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(r.flags=m,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=m>>8&1),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=s(r.check,N,2,0)),y=m=0,r.mode=3;case 3:for(;y<32;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}r.head&&(r.head.time=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,N[2]=m>>>16&255,N[3]=m>>>24&255,r.check=s(r.check,N,4,0)),y=m=0,r.mode=4;case 4:for(;y<16;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}r.head&&(r.head.xflags=255&m,r.head.os=m>>8),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=s(r.check,N,2,0)),y=m=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}r.length=m,r.head&&(r.head.extra_len=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=s(r.check,N,2,0)),y=m=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p<(x=r.length)&&(x=p),x&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,c,x,I)),512&r.flags&&(r.check=s(r.check,l,x,c)),p-=x,c+=x,r.length-=x),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;for(x=0;I=l[c+x++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I)),I&&x<p;);if(512&r.flags&&(r.check=s(r.check,l,x,c)),p-=x,c+=x,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;for(x=0;I=l[c+x++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I)),I&&x<p;);if(512&r.flags&&(r.check=s(r.check,l,x,c)),p-=x,c+=x,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(m!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}y=m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}t.adler=r.check=u(m),y=m=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=g,t.next_in=c,t.avail_in=p,r.hold=m,r.bits=y,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){m>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}switch(r.last=1&m,y-=1,3&(m>>>=1)){case 0:r.mode=14;break;case 1:if(w(r),r.mode=20,6!==e)break;m>>>=2,y-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}m>>>=2,y-=2;break;case 14:for(m>>>=7&y,y-=7&y;y<32;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if((65535&m)!=(m>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&m,y=m=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(x=r.length){if(p<x&&(x=p),g<x&&(x=g),0===x)break t;n.arraySet(f,l,c,x,d),p-=x,c+=x,g-=x,d+=x,r.length-=x;break}r.mode=12;break;case 17:for(;y<14;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(r.nlen=257+(31&m),m>>>=5,y-=5,r.ndist=1+(31&m),m>>>=5,y-=5,r.ncode=4+(15&m),m>>>=4,y-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}r.lens[F[r.have++]]=7&m,m>>>=3,y-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},L=a(0,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,L){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;B=(R=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,A=65535&R,!((S=R>>>24)<=y);){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(A<16)m>>>=S,y-=S,r.lens[r.have++]=A;else{if(16===A){for(z=S+2;y<z;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(m>>>=S,y-=S,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],x=3+(3&m),m>>>=2,y-=2}else if(17===A){for(z=S+3;y<z;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}y-=S,I=0,x=3+(7&(m>>>=S)),m>>>=3,y-=3}else{for(z=S+7;y<z;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}y-=S,I=0,x=11+(127&(m>>>=S)),m>>>=7,y-=7}if(r.have+x>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;x--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,T={bits:r.lenbits},L=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,L){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},L=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,L){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=p&&258<=g){t.next_out=d,t.avail_out=g,t.next_in=c,t.avail_in=p,r.hold=m,r.bits=y,o(t,v),d=t.next_out,f=t.output,g=t.avail_out,c=t.next_in,l=t.input,p=t.avail_in,m=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;B=(R=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,A=65535&R,!((S=R>>>24)<=y);){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(B&&0==(240&B)){for(U=S,C=B,O=A;B=(R=r.lencode[O+((m&(1<<U+C)-1)>>U)])>>>16&255,A=65535&R,!(U+(S=R>>>24)<=y);){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}m>>>=U,y-=U,r.back+=U}if(m>>>=S,y-=S,r.back+=S,r.length=A,0===B){r.mode=26;break}if(32&B){r.back=-1,r.mode=12;break}if(64&B){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&B,r.mode=22;case 22:if(r.extra){for(z=r.extra;y<z;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;B=(R=r.distcode[m&(1<<r.distbits)-1])>>>16&255,A=65535&R,!((S=R>>>24)<=y);){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(0==(240&B)){for(U=S,C=B,O=A;B=(R=r.distcode[O+((m&(1<<U+C)-1)>>U)])>>>16&255,A=65535&R,!(U+(S=R>>>24)<=y);){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}m>>>=U,y-=U,r.back+=U}if(m>>>=S,y-=S,r.back+=S,64&B){t.msg="invalid distance code",r.mode=30;break}r.offset=A,r.extra=15&B,r.mode=24;case 24:if(r.extra){for(z=r.extra;y<z;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===g)break t;if(x=v-g,r.offset>x){if((x=r.offset-x)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}k=x>r.wnext?(x-=r.wnext,r.wsize-x):r.wnext-x,x>r.length&&(x=r.length),E=r.window}else E=f,k=d-r.offset,x=r.length;for(g<x&&(x=g),g-=x,r.length-=x;f[d++]=E[k++],--x;);0===r.length&&(r.mode=21);break;case 26:if(0===g)break t;f[d++]=r.length,g--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===p)break t;p--,m|=l[c++]<<y,y+=8}if(v-=g,t.total_out+=v,r.total+=v,v&&(t.adler=r.check=r.flags?s(r.check,f,v,d-v):i(r.check,f,v,d-v)),v=g,(r.flags?m:u(m))!==r.check){t.msg="incorrect data check",r.mode=30;break}y=m=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===p)break t;p--,m+=l[c++]<<y,y+=8}if(m!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}y=m=0}r.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=d,t.avail_out=g,t.next_in=c,t.avail_in=p,r.hold=m,r.bits=y,(r.wsize||v!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&b(t,t.output,t.next_out,v-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,v-=t.avail_out,t.total_in+=_,t.total_out+=v,r.total+=v,r.wrap&&v&&(t.adler=r.check=r.flags?s(r.check,f,v,t.next_out-v):i(r.check,f,v,t.next_out-v)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==_&&0===v||4===e)&&0===L&&(L=-5),L)},r.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?h:((r.head=e).done=!1,0):h},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?h:11===r.mode&&i(1,e,n,0)!==r.check?-3:b(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):h},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,h,u,l,f,c){var d,p,g,m,y,w,b,_,v,x=c.bits,k=0,E=0,S=0,B=0,A=0,U=0,C=0,O=0,I=0,L=0,T=null,z=0,R=new n.Buf16(16),N=new n.Buf16(16),F=null,P=0;for(k=0;k<=15;k++)R[k]=0;for(E=0;E<h;E++)R[e[r+E]]++;for(A=x,B=15;1<=B&&0===R[B];B--);if(B<A&&(A=B),0===B)return u[l++]=20971520,u[l++]=20971520,c.bits=1,0;for(S=1;S<B&&0===R[S];S++);for(A<S&&(A=S),k=O=1;k<=15;k++)if(O<<=1,(O-=R[k])<0)return-1;if(0<O&&(0===t||1!==B))return-1;for(N[1]=0,k=1;k<15;k++)N[k+1]=N[k]+R[k];for(E=0;E<h;E++)0!==e[r+E]&&(f[N[e[r+E]]++]=E);if(w=0===t?(T=F=f,19):1===t?(T=i,z-=257,F=s,P-=257,256):(T=o,F=a,-1),k=S,y=l,C=E=L=0,g=-1,m=(I=1<<(U=A))-1,1===t&&852<I||2===t&&592<I)return 1;for(;;){for(b=k-C,v=f[E]<w?(_=0,f[E]):f[E]>w?(_=F[P+f[E]],T[z+f[E]]):(_=96,0),d=1<<k-C,S=p=1<<U;u[y+(L>>C)+(p-=d)]=b<<24|_<<16|v|0,0!==p;);for(d=1<<k-1;L&d;)d>>=1;if(0!==d?(L&=d-1,L+=d):L=0,E++,0==--R[k]){if(k===B)break;k=e[r+f[E]]}if(A<k&&(L&m)!==g){for(0===C&&(C=A),y+=S,O=1<<(U=k-C);U+C<B&&!((O-=R[U+C])<=0);)U++,O<<=1;if(I+=1<<U,1===t&&852<I||2===t&&592<I)return 1;u[g=L&m]=A<<24|U<<16|y-l|0}}return 0!==L&&(u[y+L]=k-C<<24|64<<16|0),c.bits=A,0}},{"../utils/common":41}],51:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var s=256,o=286,a=30,h=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],c=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=new Array(576);i(d);var p=new Array(60);i(p);var g=new Array(512);i(g);var m=new Array(256);i(m);var y=new Array(29);i(y);var w,b,_,v=new Array(a);function x(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function k(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function E(t){return t<256?g[t]:g[256+(t>>>7)]}function S(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function B(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function A(t,e,r){B(t,r[2*e],r[2*e+1])}function U(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function C(t,e,r){var n,i,s=new Array(16),o=0;for(n=1;n<=h;n++)s[n]=o=o+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=U(s[a]++,a))}}function O(t){var e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<a;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function I(t){8<t.bi_valid?S(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function L(t,e,r,n){var i=2*e,s=2*r;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]}function T(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&L(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!L(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function z(t,e,r){var n,i,o,a,h=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*h]<<8|t.pending_buf[t.d_buf+2*h+1],i=t.pending_buf[t.l_buf+h],h++,0===n?A(t,i,e):(A(t,(o=m[i])+s+1,e),0!==(a=u[o])&&B(t,i-=y[o],a),A(t,o=E(--n),r),0!==(a=l[o])&&B(t,n-=v[o],a)),h<t.last_lit;);A(t,256,e)}function R(t,e){var r,n,i,s=e.dyn_tree,o=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==s[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=o[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;1<=r;r--)T(t,s,r);for(i=u;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,s[2*i]=s[2*r]+s[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,s[2*r+1]=s[2*n+1]=i,t.heap[1]=i++,T(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,s,o,a,u=e.dyn_tree,l=e.max_code,f=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,g=e.stat_desc.max_length,m=0;for(s=0;s<=h;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)g<(s=u[2*u[2*(n=t.heap[r])+1]+1]+1)&&(s=g,m++),u[2*n+1]=s,l<n||(t.bl_count[s]++,o=0,p<=n&&(o=d[n-p]),a=u[2*n],t.opt_len+=a*(s+o),c&&(t.static_len+=a*(f[2*n+1]+o)));if(0!==m){do{for(s=g-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[g]--,m-=2}while(0<m);for(s=g;0!==s;s--)for(n=t.bl_count[s];0!==n;)l<(i=t.heap[--r])||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),n--)}}(t,e),C(s,l,t.bl_count)}function N(t,e,r){var n,i,s=-1,o=e[1],a=0,h=7,u=4;for(0===o&&(h=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++a<h&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=i,u=(a=0)===o?(h=138,3):i===o?(h=6,3):(h=7,4))}function F(t,e,r){var n,i,s=-1,o=e[1],a=0,h=7,u=4;for(0===o&&(h=138,u=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++a<h&&i===o)){if(a<u)for(;A(t,i,t.bl_tree),0!=--a;);else 0!==i?(i!==s&&(A(t,i,t.bl_tree),a--),A(t,16,t.bl_tree),B(t,a-3,2)):a<=10?(A(t,17,t.bl_tree),B(t,a-3,3)):(A(t,18,t.bl_tree),B(t,a-11,7));s=i,u=(a=0)===o?(h=138,3):i===o?(h=6,3):(h=7,4)}}i(v);var P=!1;function D(t,e,r,i){B(t,0+(i?1:0),3),function(t,e,r,i){I(t),S(t,r),S(t,~r),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r)}r._tr_init=function(t){P||(function(){var t,e,r,n,i,s=new Array(16);for(n=r=0;n<28;n++)for(y[n]=r,t=0;t<1<<u[n];t++)m[r++]=n;for(m[r-1]=n,n=i=0;n<16;n++)for(v[n]=i,t=0;t<1<<l[n];t++)g[i++]=n;for(i>>=7;n<a;n++)for(v[n]=i<<7,t=0;t<1<<l[n]-7;t++)g[256+i++]=n;for(e=0;e<=h;e++)s[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,s[8]++;for(;t<=255;)d[2*t+1]=9,t++,s[9]++;for(;t<=279;)d[2*t+1]=7,t++,s[7]++;for(;t<=287;)d[2*t+1]=8,t++,s[8]++;for(C(d,287,s),t=0;t<a;t++)p[2*t+1]=5,p[2*t]=U(t,5);w=new x(d,u,257,o,h),b=new x(p,l,0,a,h),_=new x(new Array(0),f,0,19,7)}(),P=!0),t.l_desc=new k(t.dyn_ltree,w),t.d_desc=new k(t.dyn_dtree,b),t.bl_desc=new k(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,O(t)},r._tr_stored_block=D,r._tr_flush_block=function(t,e,r,n){var i,o,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<s;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),a=function(t){var e;for(N(t,t.dyn_ltree,t.l_desc.max_code),N(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*c[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?D(t,e,r,n):4===t.strategy||o===i?(B(t,2+(n?1:0),3),z(t,d,p)):(B(t,4+(n?1:0),3),function(t,e,r,n){var i;for(B(t,e-257,5),B(t,r-1,5),B(t,n-4,4),i=0;i<n;i++)B(t,t.bl_tree[2*c[i]+1],3);F(t,t.dyn_ltree,e-1),F(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),z(t,t.dyn_ltree,t.dyn_dtree)),O(t),n&&I(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(m[r]+s+1)]++,t.dyn_dtree[2*E(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){B(t,2,3),A(t,256,d),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){"use strict";e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)},88:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>'},27:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0z" fill="none"></path><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path></svg>'},763:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></svg>'},178:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" version="1.1"><g id="surface1"><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 21.402344 2.660156 C 21.0625 2.324219 20.515625 2.324219 20.171875 2.660156 L 18.25 4.582031 C 17.914062 4.921875 17.914062 5.472656 18.25 5.8125 C 18.589844 6.152344 19.144531 6.152344 19.480469 5.8125 L 21.402344 3.890625 C 21.742188 3.550781 21.742188 3 21.402344 2.660156 Z M 21.402344 2.660156 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 23.128906 9.8125 C 23.609375 9.8125 24 9.421875 24 8.945312 C 24 8.464844 23.609375 8.074219 23.128906 8.074219 L 20.414062 8.074219 C 19.933594 8.074219 19.546875 8.464844 19.546875 8.945312 C 19.546875 9.421875 19.933594 9.8125 20.414062 9.8125 Z M 23.128906 9.8125 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 12.113281 4.71875 L 10.191406 2.796875 C 9.851562 2.460938 9.304688 2.460938 8.964844 2.796875 C 8.625 3.136719 8.625 3.6875 8.964844 4.027344 L 10.886719 5.949219 C 11.226562 6.285156 11.777344 6.285156 12.117188 5.949219 C 12.457031 5.609375 12.453125 5.058594 12.113281 4.71875 Z M 12.113281 4.71875 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 16.039062 0.988281 C 16.039062 0.503906 15.648438 0.117188 15.171875 0.117188 C 14.691406 0.117188 14.300781 0.503906 14.300781 0.988281 L 14.300781 3.703125 C 14.300781 4.183594 14.691406 4.570312 15.171875 4.570312 C 15.648438 4.570312 16.039062 4.183594 16.039062 3.703125 Z M 16.039062 0.988281 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 18.171875 13.226562 L 20.089844 15.152344 C 20.429688 15.492188 20.980469 15.492188 21.320312 15.152344 C 21.660156 14.8125 21.660156 14.265625 21.320312 13.921875 L 19.398438 12 C 19.054688 11.664062 18.507812 11.664062 18.171875 12 C 17.828125 12.34375 17.828125 12.890625 18.171875 13.226562 Z M 18.171875 13.226562 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 0 20.746094 L 3.136719 23.882812 L 15.328125 11.691406 L 12.195312 8.550781 Z M 0 20.746094 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 17.996094 9.019531 L 14.863281 5.886719 L 13.523438 7.226562 L 16.652344 10.367188 Z M 17.996094 9.019531 "></path></g></svg>'},535:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"></path></svg>'},830:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0z" fill="none"></path><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>'},917:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0z" fill="none"></path><path d="M8 5v14l11-7z"></path></svg>'},921:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"></path></svg>'},141:t=>{t.exports='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M19,3 C20.6568542,3 22,4.34314575 22,6 L22,8 C22,9.65685425 20.6568542,11 19,11 L18,11 L18,13 L19,13 C20.6568542,13 22,14.3431458 22,16 L22,18 C22,19.6568542 20.6568542,21 19,21 L5,21 C3.34314575,21 2,19.6568542 2,18 L2,16 C2,14.3431458 3.34314575,13 5,13 L6,13 L6,11 L5,11 C3.34314575,11 2,9.65685425 2,8 L2,6 C2,4.34314575 3.34314575,3 5,3 L19,3 Z M19,15 L5,15 C4.44771525,15 4,15.4477153 4,16 L4,18 C4,18.5522847 4.44771525,19 5,19 L19,19 C19.5522847,19 20,18.5522847 20,18 L20,16 C20,15.4477153 19.5522847,15 19,15 Z M7,16 C7.55228475,16 8,16.4477153 8,17 C8,17.5522847 7.55228475,18 7,18 C6.44771525,18 6,17.5522847 6,17 C6,16.4477153 6.44771525,16 7,16 Z M16,11 L8,11 L8,13 L16,13 L16,11 Z M19,5 L5,5 C4.44771525,5 4,5.44771525 4,6 L4,8 C4,8.55228475 4.44771525,9 5,9 L19,9 C19.5522847,9 20,8.55228475 20,8 L20,6 C20,5.44771525 19.5522847,5 19,5 Z M7,6 C7.55228475,6 8,6.44771525 8,7 C8,7.55228475 7.55228475,8 7,8 C6.44771525,8 6,7.55228475 6,7 C6,6.44771525 6.44771525,6 7,6 Z"></path></svg>'},458:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" version="1.1"><g id="surface1"><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 12 24 C 5.371094 24 0 18.628906 0 12 C 0 5.371094 5.371094 0 12 0 C 18.628906 0 24 5.371094 24 12 C 24 18.628906 18.628906 24 12 24 Z M 12 1.847656 C 6.390625 1.847656 1.847656 6.390625 1.847656 12 C 1.847656 17.609375 6.390625 22.152344 12 22.152344 C 17.609375 22.152344 22.152344 17.609375 22.152344 12 C 22.152344 6.390625 17.609375 1.847656 12 1.847656 Z M 12 1.847656 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 10.617188 17.355469 C 10.371094 17.351562 10.136719 17.253906 9.964844 17.078125 L 5.71875 12.835938 C 5.40625 12.46875 5.429688 11.921875 5.769531 11.582031 C 6.113281 11.242188 6.660156 11.222656 7.023438 11.539062 L 11.265625 15.78125 C 11.527344 16.042969 11.605469 16.441406 11.464844 16.785156 C 11.324219 17.128906 10.988281 17.351562 10.617188 17.355469 Z M 10.617188 17.355469 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 10.617188 17.355469 C 10.242188 17.355469 9.902344 17.128906 9.761719 16.78125 C 9.617188 16.4375 9.699219 16.039062 9.964844 15.773438 L 16.976562 8.769531 C 17.335938 8.410156 17.921875 8.410156 18.28125 8.769531 C 18.640625 9.128906 18.640625 9.714844 18.28125 10.074219 L 11.265625 17.078125 C 11.09375 17.253906 10.859375 17.351562 10.617188 17.355469 Z M 10.617188 17.355469 "></path></g></svg>'},911:t=>{t.exports='<svg version="1.1" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="m25.949 47.692h5.8803v-20.581h-5.8803zm11.761-20.581v20.581h5.8803v-20.581z" stroke-width="1.4701"></path><g fill="none"><g stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3px"><path d="m22.974 40h-18.474c-1.662 0-3-1.338-3-3v-26c0-1.662 1.338-3 3-3h39c1.662 0 3 1.338 3 3v26"></path><path d="m23.077 33.5h-5.5769c-0.94502-0.0032-1.8355 0.44208-2.4 1.2l-3.6 5.3h11.577"></path><circle cx="10.5" cy="24" r="3.5"></circle><path d="m34 24c0-1.933 1.567-3.5 3.5-3.5s3.5 1.567 3.5 3.5"></path><path d="m23.59 27.5h-3.0897c-0.831 0-1.5-0.669-1.5-1.5v-4c0-0.831 0.669-1.5 1.5-1.5h7c0.831 0 1.5 0.669 1.5 1.5v2.3077"></path></g><path d="m0 0h48v48h-48z" stroke-width="2"></path></g></svg>'},548:t=>{t.exports='<svg version="1.1" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="m28.937 23.747v24.394l19.166-12.197z" stroke-width="3.4848"></path><g fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3px"><path d="m26.369 40h-21.869c-1.662 0-3-1.338-3-3v-26c0-1.662 1.338-3 3-3h39c1.662 0 3 1.338 3 3v20.519"></path><path d="m26.266 33.5h-8.7661c-0.94502-0.0032-1.8355 0.44208-2.4 1.2l-3.6 5.3h14.869"></path><circle cx="10.5" cy="24" r="3.5"></circle><path d="m34 24c0-1.933 1.567-3.5 3.5-3.5s3.5 1.567 3.5 3.5c0 1.2167-0.62079 2.2883-1.5629 2.9155"></path><path d="m26.058 27.5h-5.5579c-0.831 0-1.5-0.669-1.5-1.5v-4c0-0.831 0.669-1.5 1.5-1.5h7"></path></g></svg>'},891:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" version="1.1"><g id="surface1"><path style=" stroke:none;fill-rule:nonzero;fill:rgb(90.980392%,28.235294%,28.627451%);fill-opacity:1;" d="M 24 12 C 24 18.628906 18.628906 24 12 24 C 5.371094 24 0 18.628906 0 12 C 0 5.371094 5.371094 0 12 0 C 18.628906 0 24 5.371094 24 12 Z M 24 12 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(92.941176%,78.823529%,17.254902%);fill-opacity:1;" d="M 20.726562 16.910156 L 12.492188 3.636719 C 12.394531 3.484375 12.226562 3.390625 12.046875 3.390625 C 11.863281 3.390625 11.695312 3.484375 11.597656 3.636719 L 3.34375 16.945312 C 3.242188 17.105469 3.238281 17.3125 3.328125 17.476562 C 3.421875 17.644531 3.597656 17.75 3.789062 17.75 L 20.304688 17.75 C 20.59375 17.75 20.828125 17.511719 20.828125 17.222656 C 20.828125 17.105469 20.789062 16.996094 20.726562 16.910156 Z M 20.726562 16.910156 "></path><path style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" d="M 11.433594 12.261719 L 11.265625 9.707031 C 11.234375 9.207031 11.21875 8.851562 11.21875 8.632812 C 11.21875 8.339844 11.292969 8.109375 11.449219 7.945312 C 11.601562 7.777344 11.808594 7.695312 12.058594 7.695312 C 12.367188 7.695312 12.570312 7.800781 12.671875 8.011719 C 12.777344 8.222656 12.828125 8.53125 12.828125 8.925781 C 12.828125 9.164062 12.816406 9.402344 12.789062 9.640625 L 12.5625 12.269531 C 12.535156 12.585938 12.484375 12.824219 12.402344 12.992188 C 12.320312 13.15625 12.183594 13.242188 11.996094 13.242188 C 11.804688 13.242188 11.671875 13.160156 11.59375 13 C 11.519531 12.835938 11.46875 12.589844 11.433594 12.261719 Z M 12.027344 15.769531 C 11.808594 15.769531 11.621094 15.699219 11.460938 15.558594 C 11.296875 15.417969 11.21875 15.222656 11.21875 14.96875 C 11.21875 14.75 11.292969 14.5625 11.449219 14.40625 C 11.601562 14.253906 11.792969 14.175781 12.015625 14.175781 C 12.242188 14.175781 12.433594 14.253906 12.589844 14.40625 C 12.75 14.5625 12.828125 14.75 12.828125 14.96875 C 12.828125 15.21875 12.746094 15.414062 12.585938 15.554688 C 12.425781 15.699219 12.242188 15.769531 12.027344 15.769531 Z M 12.027344 15.769531 "></path></g></svg>'}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t=r(187),e=r(171),n=r(733),i=r(764);const s=26112;class o{constructor(t){if(this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.imageData=this.ctx.getImageData(0,0,320,240),this.pixels=new Uint32Array(this.imageData.data.buffer),this.flashPhase=0,this.palette=new Uint32Array([255,540066047,3225424127,3225469183,1085280511,1354805503,3770683647,3233857791,255,809566207,4282396927,4285591807,1356861695,1356922879,4293415167,4294967295]),0===new Uint8Array(new Uint16Array([32768]).buffer)[0])for(let t=0;t<16;t++){const e=this.palette[t];this.palette[t]=e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}}showFrame(t){const e=new Uint8Array(t);let r=0,n=0;for(let t=0;t<24;t++)for(let t=0;t<160;t++){let t=this.palette[e[n++]];this.pixels[r++]=t,this.pixels[r++]=t}for(let t=0;t<192;t++){for(let t=0;t<16;t++){let t=this.palette[e[n++]];this.pixels[r++]=t,this.pixels[r++]=t}for(let t=0;t<32;t++){let t=e[n++];const i=e[n++];let s,o;128&i&&16&this.flashPhase?(o=this.palette[(64&i)>>3|7&i],s=this.palette[(120&i)>>3]):(s=this.palette[(64&i)>>3|7&i],o=this.palette[(120&i)>>3]);for(let e=0;e<8;e++)this.pixels[r++]=128&t?s:o,t<<=1}for(let t=0;t<16;t++){let t=this.palette[e[n++]];this.pixels[r++]=t,this.pixels[r++]=t}}for(let t=0;t<24;t++)for(let t=0;t<160;t++){let t=this.palette[e[n++]];this.pixels[r++]=t,this.pixels[r++]=t}this.ctx.putImageData(this.imageData,0,0),this.flashPhase=this.flashPhase+1&31}}class a{constructor(t){this.renderer=new o(t),this.frameBuffers=[new ArrayBuffer(s),new ArrayBuffer(s),new ArrayBuffer(s)],this.bufferBeingShown=null,this.bufferAwaitingShow=null,this.lockedBuffer=null}frameCompleted(t){this.frameBuffers[this.lockedBuffer]=t,this.bufferAwaitingShow=this.lockedBuffer,this.lockedBuffer=null}getNextFrameBufferIndex(){for(let t=0;t<3;t++)if(t!==this.bufferBeingShown&&t!==this.bufferAwaitingShow)return t}getNextFrameBuffer(){return this.lockedBuffer=this.getNextFrameBufferIndex(),this.frameBuffers[this.lockedBuffer]}readyToShow(){return null!==this.bufferAwaitingShow}show(){this.bufferBeingShown=this.bufferAwaitingShow,this.bufferAwaitingShow=null,this.renderer.showFrame(this.frameBuffers[this.bufferBeingShown]),this.bufferBeingShown=null}}var h=r(917),u=r(88);class l{constructor(t){this.elem=document.createElement("div"),this.elem.style.display="flow-root",this.elem.style.backgroundColor="#eee",this.elem.style.fontFamily="Arial, Helvetica, sans-serif",this.elem.style.top="0",this.elem.style.width="100%",t.appendChild(this.elem),this.currentMouseenterEvent=null,this.currentMouseoutEvent=null}addMenu(t){return new f(this.elem,t)}enterFullscreen(){this.elem.style.position="absolute"}exitFullscreen(){this.elem.style.position="static"}show(){this.elem.style.visibility="visible"}hide(){this.elem.style.visibility="hidden"}onmouseenter(t){this.currentMouseenterEvent&&this.elem.removeEventListener("mouseenter",this.currentMouseenterEvent),t&&this.elem.addEventListener("mouseenter",t),this.currentMouseenterEvent=t}onmouseout(t){this.currentMouseoutEvent&&this.elem.removeEventListener("mouseleave",this.currentMouseoutEvent),t&&this.elem.addEventListener("mouseleave",t),this.currentMouseoutEvent=t}}class f{constructor(t,e){const r=document.createElement("div");r.style.float="left",r.style.position="relative",t.appendChild(r);const n=document.createElement("button");n.style.margin="2px",n.innerText=e,r.appendChild(n),this.list=document.createElement("ul"),this.list.style.position="absolute",this.list.style.width="150px",this.list.style.backgroundColor="#eee",this.list.style.listStyleType="none",this.list.style.margin="0",this.list.style.padding="0",this.list.style.border="1px solid #888",this.list.style.display="none",r.appendChild(this.list),n.addEventListener("click",(()=>{this.isOpen()?this.close():this.open()})),document.addEventListener("click",(t=>{t.target!=n&&this.isOpen()&&this.close()}))}isOpen(){return"block"==this.list.style.display}open(){this.list.style.display="block"}close(){this.list.style.display="none"}addItem(t,e){const r=document.createElement("li");this.list.appendChild(r);const n=document.createElement("button");return n.innerText=t,n.style.width="100%",n.style.textAlign="left",n.style.borderWidth="0",n.style.paddingTop="4px",n.style.paddingBottom="4px",n.addEventListener("mouseenter",(()=>{n.style.backgroundColor="#ddd"})),n.addEventListener("mouseout",(()=>{n.style.backgroundColor="inherit"})),e&&n.addEventListener("click",e),r.appendChild(n),{setBullet:()=>{n.innerText=String.fromCharCode(8226)+" "+t},unsetBullet:()=>{n.innerText=t},setCheckbox:()=>{n.innerText=String.fromCharCode(10003)+" "+t},unsetCheckbox:()=>{n.innerText=t}}}}class c{constructor(t){this.elem=document.createElement("div"),this.elem.style.backgroundColor="#ccc",this.elem.style.bottom="0",this.elem.style.width="100%",t.appendChild(this.elem),this.currentMouseenterEvent=null,this.currentMouseoutEvent=null}addButton(t,e,r){const n=new d(t,e=e||{},r);return"right"==e.align&&(n.elem.style.float="right"),this.elem.appendChild(n.elem),n}addLabel(){const t=new p;return this.elem.appendChild(t.elem),t}enterFullscreen(){this.elem.style.position="absolute"}exitFullscreen(){this.elem.style.position="static"}show(){this.elem.style.visibility="visible"}hide(){this.elem.style.visibility="hidden"}onmouseenter(t){this.currentMouseenterEvent&&this.elem.removeEventListener("mouseenter",this.currentMouseenterEvent),t&&this.elem.addEventListener("mouseenter",t),this.currentMouseenterEvent=t}onmouseout(t){this.currentMouseoutEvent&&this.elem.removeEventListener("mouseleave",this.currentMouseoutEvent),t&&this.elem.addEventListener("mouseleave",t),this.currentMouseoutEvent=t}}class d{constructor(t,e,r){this.elem=document.createElement("button"),this.elem.style.margin="2px",this.setIcon(t),e.label&&this.setLabel(e.label),this.elem.addEventListener("click",r)}setIcon(t){this.elem.innerHTML=t,this.elem.firstChild.style.height="20px",this.elem.firstChild.style.verticalAlign="middle"}setLabel(t){this.elem.title=t}disable(){this.elem.disabled=!0,this.elem.firstChild.style.opacity="0.5"}enable(){this.elem.disabled=!1,this.elem.firstChild.style.opacity="1"}}class p{constructor(){this.elem=document.createElement("span"),this.elem.style.margin="2px",this.elem.style.padding="2px",this.icon=document.createElement("span"),this.elem.appendChild(this.icon),this.text=document.createElement("span"),this.text.style.fontFamily="system-ui",this.text.style.fontSize="12px",this.text.style.padding="4px",this.elem.appendChild(this.text)}setText(t){this.text.textContent=t}setIcon(t){this.icon.innerHTML=t,this.icon.firstChild.style.height="20px",this.icon.firstChild.style.verticalAlign="middle"}disable(){this.elem.disabled=!0,this.elem.firstChild.style.opacity="0"}enable(t,e,r){this.text.style.color=r,this.setIcon(t),this.setText(e),this.elem.disabled=!1,this.elem.firstChild.style.opacity="1"}}class g extends t{constructor(t,e,r){super(),this.canvas=e.canvas,this.dialog=document.createElement("div"),this.dialog.style.display="none",t.appendChild(this.dialog);const n=document.createElement("button");n.innerHTML=u,n.style.float="right",n.style.border="none",n.firstChild.style.height="20px",n.firstChild.style.verticalAlign="middle",this.dialog.appendChild(n),n.addEventListener("click",(()=>{this.hideDialog()})),this.dialogBody=document.createElement("div"),this.dialogBody.style.clear="both",this.dialog.appendChild(this.dialogBody),this.appContainer=document.createElement("div"),t.appendChild(this.appContainer),this.appContainer.style.position="relative",this.menuBar=new l(this.appContainer),this.appContainer.appendChild(this.canvas),this.canvas.style.objectFit="contain",this.canvas.style.display="block",this.toolbar=new c(this.appContainer),this.startButton=document.createElement("button"),this.startButton.innerHTML=h,this.appContainer.appendChild(this.startButton),this.startButton.style.position="absolute",this.startButton.style.top="50%",this.startButton.style.left="50%",this.startButton.style.width="96px",this.startButton.style.height="64px",this.startButton.style.marginLeft="-48px",this.startButton.style.marginTop="-32px",this.startButton.style.backgroundColor="rgba(160, 160, 160, 0.7)",this.startButton.style.border="none",this.startButton.style.borderRadius="4px",this.startButton.firstChild.style.height="56px",this.startButton.firstChild.style.verticalAlign="middle",this.startButton.addEventListener("mouseenter",(()=>{this.startButton.style.backgroundColor="rgba(128, 128, 128, 0.7)"})),this.startButton.addEventListener("mouseleave",(()=>{this.startButton.style.backgroundColor="rgba(160, 160, 160, 0.7)"})),this.startButton.addEventListener("click",(t=>{e.start()})),e.on("start",(()=>{this.startButton.style.display="none"})),e.on("pause",(()=>{this.startButton.style.display="block"})),this.zoom=null,this.isFullscreen=!1,this.uiIsHidden=!1,this.allowUIHiding=!0,this.hideUITimeout=null,this.ignoreNextMouseMove=!1;const i=()=>{this.ignoreNextMouseMove?this.ignoreNextMouseMove=!1:(this.showUI(),this.hideUITimeout&&clearTimeout(this.hideUITimeout),this.hideUITimeout=setTimeout((()=>{this.hideUI()}),3e3))};this.appContainer.addEventListener("fullscreenchange",(()=>{document.fullscreenElement?(this.isFullscreen=!0,this.canvas.style.width="100%",this.canvas.style.height="100%",document.addEventListener("mousemove",i),this.ignoreNextMouseMove=!0,this.menuBar.enterFullscreen(),this.menuBar.onmouseenter((()=>{this.allowUIHiding=!1})),this.menuBar.onmouseout((()=>{this.allowUIHiding=!0})),this.toolbar.enterFullscreen(),this.toolbar.onmouseenter((()=>{this.allowUIHiding=!1})),this.toolbar.onmouseout((()=>{this.allowUIHiding=!0})),this.hideUI(),this.emit("setZoom","fullscreen")):(this.isFullscreen=!1,this.hideUITimeout&&clearTimeout(this.hideUITimeout),this.showUI(),this.menuBar.exitFullscreen(),this.menuBar.onmouseenter(null),this.menuBar.onmouseout(null),this.toolbar.exitFullscreen(),this.toolbar.onmouseenter(null),this.toolbar.onmouseout(null),document.removeEventListener("mousemove",i),this.setZoom(this.zoom))})),this.setZoom(r.zoom||1),r.sandbox||(this.appContainer.addEventListener("drop",(t=>{t.preventDefault();let r=Promise.resolve();if(t.dataTransfer.items){for(const n of t.dataTransfer.items)if("file"===n.kind){const t=n.getAsFile();r=r.then((()=>{e.openFile(t)}))}}else for(const n of t.dataTransfer.files)r=r.then((()=>{e.openFile(n)}));r.then((()=>{e.isInitiallyPaused&&e.start()}))})),this.appContainer.addEventListener("dragover",(t=>{t.preventDefault()})))}setZoom(t){if(this.zoom=t,this.isFullscreen)return void document.exitFullscreen();const e=320*this.zoom,r=240*this.zoom;this.canvas.style.width=e+"px",this.canvas.style.height=r+"px",this.appContainer.style.width=e+"px",this.emit("setZoom",t)}enterFullscreen(){this.appContainer.requestFullscreen()}exitFullscreen(){this.isFullscreen&&document.exitFullscreen()}toggleFullscreen(){this.isFullscreen?this.exitFullscreen():this.enterFullscreen()}hideUI(){this.allowUIHiding&&!this.uiIsHidden&&(this.uiIsHidden=!0,this.appContainer.style.cursor="none",this.menuBar.hide(),this.toolbar.hide())}showUI(){this.uiIsHidden&&(this.uiIsHidden=!1,this.appContainer.style.cursor="default",this.menuBar.show(),this.toolbar.show())}showDialog(){return this.dialog.style.display="block",this.dialog.style.position="absolute",this.dialog.style.backgroundColor="#eee",this.dialog.style.zIndex="100",this.dialog.style.width="75%",this.dialog.style.height="80%",this.dialog.style.left="12%",this.dialog.style.top="10%",this.dialog.style.overflow="scroll",this.dialogBody.style.paddingLeft="8px",this.dialogBody.style.paddingRight="8px",this.dialogBody.style.paddingBottom="8px",this.dialogBody}hideDialog(){this.dialog.style.display="none",this.dialogBody.innerHTML=""}unload(){this.dialog.remove(),this.appContainer.remove()}}function m(t){let e=t.length;for(;--e>=0;)t[e]=0}const y=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),b=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=new Array(576);m(v);const x=new Array(60);m(x);const k=new Array(512);m(k);const E=new Array(256);m(E);const S=new Array(29);m(S);const B=new Array(30);function A(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}let U,C,O;function I(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}m(B);const L=t=>t<256?k[t]:k[256+(t>>>7)],T=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=(t,e,r)=>{t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,T(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)},R=(t,e,r)=>{z(t,r[2*e],r[2*e+1])},N=(t,e)=>{let r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1},F=(t,e,r)=>{const n=new Array(16);let i,s,o=0;for(i=1;i<=15;i++)n[i]=o=o+r[i-1]<<1;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=N(n[e]++,e))}},P=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},D=t=>{t.bi_valid>8?T(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},M=(t,e,r,n)=>{const i=2*e,s=2*r;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]},j=(t,e,r)=>{const n=t.heap[r];let i=r<<1;for(;i<=t.heap_len&&(i<t.heap_len&&M(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!M(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n},Z=(t,e,r)=>{let n,i,s,o,a=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],i=t.pending_buf[t.l_buf+a],a++,0===n?R(t,i,e):(s=E[i],R(t,s+256+1,e),o=y[s],0!==o&&(i-=S[s],z(t,i,o)),n--,s=L(n),R(t,s,r),o=w[s],0!==o&&(n-=B[s],z(t,n,o)))}while(a<t.last_lit);R(t,256,e)},$=(t,e)=>{const r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,h,u=-1;for(t.heap_len=0,t.heap_max=573,o=0;o<s;o++)0!==r[2*o]?(t.heap[++t.heap_len]=u=o,t.depth[o]=0):r[2*o+1]=0;for(;t.heap_len<2;)h=t.heap[++t.heap_len]=u<2?++u:0,r[2*h]=1,t.depth[h]=0,t.opt_len--,i&&(t.static_len-=n[2*h+1]);for(e.max_code=u,o=t.heap_len>>1;o>=1;o--)j(t,r,o);h=s;do{o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],j(t,r,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,r[2*h]=r[2*o]+r[2*a],t.depth[h]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,r[2*o+1]=r[2*a+1]=h,t.heap[1]=h++,j(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,h=e.stat_desc.max_length;let u,l,f,c,d,p,g=0;for(c=0;c<=15;c++)t.bl_count[c]=0;for(r[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)l=t.heap[u],c=r[2*r[2*l+1]+1]+1,c>h&&(c=h,g++),r[2*l+1]=c,l>n||(t.bl_count[c]++,d=0,l>=a&&(d=o[l-a]),p=r[2*l],t.opt_len+=p*(c+d),s&&(t.static_len+=p*(i[2*l+1]+d)));if(0!==g){do{for(c=h-1;0===t.bl_count[c];)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[h]--,g-=2}while(g>0);for(c=h;0!==c;c--)for(l=t.bl_count[c];0!==l;)f=t.heap[--u],f>n||(r[2*f+1]!==c&&(t.opt_len+=(c-r[2*f+1])*r[2*f],r[2*f+1]=c),l--)}})(t,e),F(r,u,t.bl_count)},H=(t,e,r)=>{let n,i,s=-1,o=e[1],a=0,h=7,u=4;for(0===o&&(h=138,u=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++a<h&&i===o||(a<u?t.bl_tree[2*i]+=a:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,s=i,0===o?(h=138,u=3):i===o?(h=6,u=3):(h=7,u=4))},W=(t,e,r)=>{let n,i,s=-1,o=e[1],a=0,h=7,u=4;for(0===o&&(h=138,u=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++a<h&&i===o)){if(a<u)do{R(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(R(t,i,t.bl_tree),a--),R(t,16,t.bl_tree),z(t,a-3,2)):a<=10?(R(t,17,t.bl_tree),z(t,a-3,3)):(R(t,18,t.bl_tree),z(t,a-11,7));a=0,s=i,0===o?(h=138,u=3):i===o?(h=6,u=3):(h=7,u=4)}};let V=!1;const Y=(t,e,r,n)=>{z(t,0+(n?1:0),3),((t,e,r,n)=>{D(t),T(t,r),T(t,~r),t.pending_buf.set(t.window.subarray(e,e+r),t.pending),t.pending+=r})(t,e,r)};var J={_tr_init:t=>{V||((()=>{let t,e,r,n,i;const s=new Array(16);for(r=0,n=0;n<28;n++)for(S[n]=r,t=0;t<1<<y[n];t++)E[r++]=n;for(E[r-1]=n,i=0,n=0;n<16;n++)for(B[n]=i,t=0;t<1<<w[n];t++)k[i++]=n;for(i>>=7;n<30;n++)for(B[n]=i<<7,t=0;t<1<<w[n]-7;t++)k[256+i++]=n;for(e=0;e<=15;e++)s[e]=0;for(t=0;t<=143;)v[2*t+1]=8,t++,s[8]++;for(;t<=255;)v[2*t+1]=9,t++,s[9]++;for(;t<=279;)v[2*t+1]=7,t++,s[7]++;for(;t<=287;)v[2*t+1]=8,t++,s[8]++;for(F(v,287,s),t=0;t<30;t++)x[2*t+1]=5,x[2*t]=N(t,5);U=new A(v,y,257,286,15),C=new A(x,w,0,30,15),O=new A(new Array(0),b,0,19,7)})(),V=!0),t.l_desc=new I(t.dyn_ltree,U),t.d_desc=new I(t.dyn_dtree,C),t.bl_desc=new I(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,P(t)},_tr_stored_block:Y,_tr_flush_block:(t,e,r,n)=>{let i,s,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),$(t,t.l_desc),$(t,t.d_desc),o=(t=>{let e;for(H(t,t.dyn_ltree,t.l_desc.max_code),H(t,t.dyn_dtree,t.d_desc.max_code),$(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*_[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?Y(t,e,r,n):4===t.strategy||s===i?(z(t,2+(n?1:0),3),Z(t,v,x)):(z(t,4+(n?1:0),3),((t,e,r,n)=>{let i;for(z(t,e-257,5),z(t,r-1,5),z(t,n-4,4),i=0;i<n;i++)z(t,t.bl_tree[2*_[i]+1],3);W(t,t.dyn_ltree,e-1),W(t,t.dyn_dtree,r-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),Z(t,t.dyn_ltree,t.dyn_dtree)),P(t),n&&D(t)},_tr_tally:(t,e,r)=>(t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(E[r]+256+1)]++,t.dyn_dtree[2*L(e)]++),t.last_lit===t.lit_bufsize-1),_tr_align:t=>{z(t,2,3),R(t,256,v),(t=>{16===t.bi_valid?(T(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},q=(t,e,r,n)=>{let i=65535&t|0,s=t>>>16&65535|0,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+e[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const K=new Uint32Array((()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e})());var G=(t,e,r,n)=>{const i=K,s=n+r;t^=-1;for(let r=n;r<s;r++)t=t>>>8^i[255&(t^e[r])];return-1^t},X={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Q={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:tt,_tr_stored_block:et,_tr_flush_block:rt,_tr_tally:nt,_tr_align:it}=J,{Z_NO_FLUSH:st,Z_PARTIAL_FLUSH:ot,Z_FULL_FLUSH:at,Z_FINISH:ht,Z_BLOCK:ut,Z_OK:lt,Z_STREAM_END:ft,Z_STREAM_ERROR:ct,Z_DATA_ERROR:dt,Z_BUF_ERROR:pt,Z_DEFAULT_COMPRESSION:gt,Z_FILTERED:mt,Z_HUFFMAN_ONLY:yt,Z_RLE:wt,Z_FIXED:bt,Z_DEFAULT_STRATEGY:_t,Z_UNKNOWN:vt,Z_DEFLATED:xt}=Q,kt=258,Et=262,St=103,Bt=113,At=666,Ut=(t,e)=>(t.msg=X[e],e),Ct=t=>(t<<1)-(t>4?9:0),Ot=t=>{let e=t.length;for(;--e>=0;)t[e]=0};let It=(t,e,r)=>(e<<t.hash_shift^r)&t.hash_mask;const Lt=t=>{const e=t.state;let r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+r),t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))},Tt=(t,e)=>{rt(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Lt(t.strm)},zt=(t,e)=>{t.pending_buf[t.pending++]=e},Rt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Nt=(t,e,r,n)=>{let i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),r),1===t.state.wrap?t.adler=q(t.adler,e,i,r):2===t.state.wrap&&(t.adler=G(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)},Ft=(t,e)=>{let r,n,i=t.max_chain_length,s=t.strstart,o=t.prev_length,a=t.nice_match;const h=t.strstart>t.w_size-Et?t.strstart-(t.w_size-Et):0,u=t.window,l=t.w_mask,f=t.prev,c=t.strstart+kt;let d=u[s+o-1],p=u[s+o];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(r=e,u[r+o]===p&&u[r+o-1]===d&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<c);if(n=kt-(c-s),s=c-kt,n>o){if(t.match_start=e,o=n,n>=a)break;d=u[s+o-1],p=u[s+o]}}}while((e=f[e&l])>h&&0!=--i);return o<=t.lookahead?o:t.lookahead},Pt=t=>{const e=t.w_size;let r,n,i,s,o;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Et)){t.window.set(t.window.subarray(e,e+e),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do{i=t.head[--r],t.head[r]=i>=e?i-e:0}while(--n);n=e,r=n;do{i=t.prev[--r],t.prev[r]=i>=e?i-e:0}while(--n);s+=e}if(0===t.strm.avail_in)break;if(n=Nt(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=n,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=It(t,t.ins_h,t.window[o+1]);t.insert&&(t.ins_h=It(t,t.ins_h,t.window[o+3-1]),t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Et&&0!==t.strm.avail_in)},Dt=(t,e)=>{let r,n;for(;;){if(t.lookahead<Et){if(Pt(t),t.lookahead<Et&&e===st)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=It(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-Et&&(t.match_length=Ft(t,r)),t.match_length>=3)if(n=nt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=It(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=It(t,t.ins_h,t.window[t.strstart+1]);else n=nt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===ht?(Tt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Tt(t,!1),0===t.strm.avail_out)?1:2},Mt=(t,e)=>{let r,n,i;for(;;){if(t.lookahead<Et){if(Pt(t),t.lookahead<Et&&e===st)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=It(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-Et&&(t.match_length=Ft(t,r),t.match_length<=5&&(t.strategy===mt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=nt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=It(t,t.ins_h,t.window[t.strstart+3-1]),r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(Tt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(n=nt(t,0,t.window[t.strstart-1]),n&&Tt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=nt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===ht?(Tt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Tt(t,!1),0===t.strm.avail_out)?1:2};function jt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}const Zt=[new jt(0,0,0,0,((t,e)=>{let r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Pt(t),0===t.lookahead&&e===st)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;const n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Tt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Et&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ht?(Tt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Tt(t,!1),t.strm.avail_out),1)})),new jt(4,4,8,4,Dt),new jt(4,5,16,8,Dt),new jt(4,6,32,32,Dt),new jt(4,4,16,16,Mt),new jt(8,16,32,32,Mt),new jt(8,16,128,128,Mt),new jt(8,32,128,256,Mt),new jt(32,128,258,1024,Mt),new jt(32,258,258,4096,Mt)];function $t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ot(this.dyn_ltree),Ot(this.dyn_dtree),Ot(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ot(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ot(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ht=t=>{if(!t||!t.state)return Ut(t,ct);t.total_in=t.total_out=0,t.data_type=vt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:Bt,t.adler=2===e.wrap?0:1,e.last_flush=st,tt(e),lt},Wt=t=>{const e=Ht(t);var r;return e===lt&&((r=t.state).window_size=2*r.w_size,Ot(r.head),r.max_lazy_match=Zt[r.level].max_lazy,r.good_match=Zt[r.level].good_length,r.nice_match=Zt[r.level].nice_length,r.max_chain_length=Zt[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),e},Vt=(t,e,r,n,i,s)=>{if(!t)return ct;let o=1;if(e===gt&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==xt||n<8||n>15||e<0||e>9||s<0||s>bt)return Ut(t,ct);8===n&&(n=9);const a=new $t;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=s,a.method=r,Wt(t)};var Yt=Vt,Jt=(t,e)=>t&&t.state?2!==t.state.wrap?ct:(t.state.gzhead=e,lt):ct,qt=(t,e)=>{let r,n;if(!t||!t.state||e>ut||e<0)return t?Ut(t,ct):ct;const i=t.state;if(!t.output||!t.input&&0!==t.avail_in||i.status===At&&e!==ht)return Ut(t,0===t.avail_out?pt:ct);i.strm=t;const s=i.last_flush;if(i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,zt(i,31),zt(i,139),zt(i,8),i.gzhead?(zt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),zt(i,255&i.gzhead.time),zt(i,i.gzhead.time>>8&255),zt(i,i.gzhead.time>>16&255),zt(i,i.gzhead.time>>24&255),zt(i,9===i.level?2:i.strategy>=yt||i.level<2?4:0),zt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(zt(i,255&i.gzhead.extra.length),zt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=G(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(zt(i,0),zt(i,0),zt(i,0),zt(i,0),zt(i,0),zt(i,9===i.level?2:i.strategy>=yt||i.level<2?4:0),zt(i,3),i.status=Bt);else{let e=xt+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=yt||i.level<2?0:i.level<6?1:6===i.level?2:3,e|=r<<6,0!==i.strstart&&(e|=32),e+=31-e%31,i.status=Bt,Rt(i,e),0!==i.strstart&&(Rt(i,t.adler>>>16),Rt(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=G(t.adler,i.pending_buf,i.pending-r,r)),Lt(t),r=i.pending,i.pending!==i.pending_buf_size));)zt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=G(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=G(t.adler,i.pending_buf,i.pending-r,r)),Lt(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,zt(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=G(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=G(t.adler,i.pending_buf,i.pending-r,r)),Lt(t),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,zt(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(t.adler=G(t.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=St)}else i.status=St;if(i.status===St&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Lt(t),i.pending+2<=i.pending_buf_size&&(zt(i,255&t.adler),zt(i,t.adler>>8&255),t.adler=0,i.status=Bt)):i.status=Bt),0!==i.pending){if(Lt(t),0===t.avail_out)return i.last_flush=-1,lt}else if(0===t.avail_in&&Ct(e)<=Ct(s)&&e!==ht)return Ut(t,pt);if(i.status===At&&0!==t.avail_in)return Ut(t,pt);if(0!==t.avail_in||0!==i.lookahead||e!==st&&i.status!==At){let r=i.strategy===yt?((t,e)=>{let r;for(;;){if(0===t.lookahead&&(Pt(t),0===t.lookahead)){if(e===st)return 1;break}if(t.match_length=0,r=nt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ht?(Tt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Tt(t,!1),0===t.strm.avail_out)?1:2})(i,e):i.strategy===wt?((t,e)=>{let r,n,i,s;const o=t.window;for(;;){if(t.lookahead<=kt){if(Pt(t),t.lookahead<=kt&&e===st)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=t.strstart+kt;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=kt-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=nt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=nt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Tt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ht?(Tt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Tt(t,!1),0===t.strm.avail_out)?1:2})(i,e):Zt[i.level].func(i,e);if(3!==r&&4!==r||(i.status=At),1===r||3===r)return 0===t.avail_out&&(i.last_flush=-1),lt;if(2===r&&(e===ot?it(i):e!==ut&&(et(i,0,0,!1),e===at&&(Ot(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Lt(t),0===t.avail_out))return i.last_flush=-1,lt}return e!==ht?lt:i.wrap<=0?ft:(2===i.wrap?(zt(i,255&t.adler),zt(i,t.adler>>8&255),zt(i,t.adler>>16&255),zt(i,t.adler>>24&255),zt(i,255&t.total_in),zt(i,t.total_in>>8&255),zt(i,t.total_in>>16&255),zt(i,t.total_in>>24&255)):(Rt(i,t.adler>>>16),Rt(i,65535&t.adler)),Lt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?lt:ft)},Kt=t=>{if(!t||!t.state)return ct;const e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==St&&e!==Bt&&e!==At?Ut(t,ct):(t.state=null,e===Bt?Ut(t,dt):lt)},Gt=(t,e)=>{let r=e.length;if(!t||!t.state)return ct;const n=t.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return ct;if(1===i&&(t.adler=q(t.adler,e,r,0)),n.wrap=0,r>=n.w_size){0===i&&(Ot(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(r-n.w_size,r),0),e=t,r=n.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=r,t.next_in=0,t.input=e,Pt(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=It(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,Pt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,n.wrap=i,lt};const Xt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Qt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const e in r)Xt(r,e)&&(t[e]=r[e])}}return t},te=t=>{let e=0;for(let r=0,n=t.length;r<n;r++)e+=t[r].length;const r=new Uint8Array(e);for(let e=0,n=0,i=t.length;e<i;e++){let i=t[e];r.set(i,n),n+=i.length}return r};let ee=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){ee=!1}const re=new Uint8Array(256);for(let t=0;t<256;t++)re[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;re[254]=re[254]=1;var ne=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,r,n,i,s,o=t.length,a=0;for(i=0;i<o;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<o&&(n=t.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},ie=(t,e)=>{const r=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let e=t[n++];if(e<128){s[i++]=e;continue}let o=re[e];if(o>4)s[i++]=65533,n+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&n<r;)e=e<<6|63&t[n++],o--;o>1?s[i++]=65533:e<65536?s[i++]=e:(e-=65536,s[i++]=55296|e>>10&1023,s[i++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&ee)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r})(s,i)},se=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let r=e-1;for(;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+re[t[r]]>e?r:e},oe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const ae=Object.prototype.toString,{Z_NO_FLUSH:he,Z_SYNC_FLUSH:ue,Z_FULL_FLUSH:le,Z_FINISH:fe,Z_OK:ce,Z_STREAM_END:de,Z_DEFAULT_COMPRESSION:pe,Z_DEFAULT_STRATEGY:ge,Z_DEFLATED:me}=Q;function ye(t){this.options=Qt({level:pe,method:me,chunkSize:16384,windowBits:15,memLevel:8,strategy:ge},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new oe,this.strm.avail_out=0;let r=Yt(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==ce)throw new Error(X[r]);if(e.header&&Jt(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?ne(e.dictionary):"[object ArrayBuffer]"===ae.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=Gt(this.strm,t),r!==ce)throw new Error(X[r]);this._dict_set=!0}}function we(t,e){const r=new ye(e);if(r.push(t,!0),r.err)throw r.msg||X[r.err];return r.result}ye.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?fe:he,"string"==typeof t?r.input=ne(t):"[object ArrayBuffer]"===ae.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===ue||s===le)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=qt(r,s),i===de)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Kt(this.strm),this.onEnd(i),this.ended=!0,i===ce;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ye.prototype.onData=function(t){this.chunks.push(t)},ye.prototype.onEnd=function(t){t===ce&&(this.result=te(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var be={Deflate:ye,deflate:we,deflateRaw:function(t,e){return(e=e||{}).raw=!0,we(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,we(t,e)},constants:Q},_e=function(t,e){let r,n,i,s,o,a,h,u,l,f,c,d,p,g,m,y,w,b,_,v,x,k,E,S;const B=t.state;r=t.next_in,E=t.input,n=r+(t.avail_in-5),i=t.next_out,S=t.output,s=i-(e-t.avail_out),o=i+(t.avail_out-257),a=B.dmax,h=B.wsize,u=B.whave,l=B.wnext,f=B.window,c=B.hold,d=B.bits,p=B.lencode,g=B.distcode,m=(1<<B.lenbits)-1,y=(1<<B.distbits)-1;t:do{d<15&&(c+=E[r++]<<d,d+=8,c+=E[r++]<<d,d+=8),w=p[c&m];e:for(;;){if(b=w>>>24,c>>>=b,d-=b,b=w>>>16&255,0===b)S[i++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=p[(65535&w)+(c&(1<<b)-1)];continue e}if(32&b){B.mode=12;break t}t.msg="invalid literal/length code",B.mode=30;break t}_=65535&w,b&=15,b&&(d<b&&(c+=E[r++]<<d,d+=8),_+=c&(1<<b)-1,c>>>=b,d-=b),d<15&&(c+=E[r++]<<d,d+=8,c+=E[r++]<<d,d+=8),w=g[c&y];r:for(;;){if(b=w>>>24,c>>>=b,d-=b,b=w>>>16&255,!(16&b)){if(0==(64&b)){w=g[(65535&w)+(c&(1<<b)-1)];continue r}t.msg="invalid distance code",B.mode=30;break t}if(v=65535&w,b&=15,d<b&&(c+=E[r++]<<d,d+=8,d<b&&(c+=E[r++]<<d,d+=8)),v+=c&(1<<b)-1,v>a){t.msg="invalid distance too far back",B.mode=30;break t}if(c>>>=b,d-=b,b=i-s,v>b){if(b=v-b,b>u&&B.sane){t.msg="invalid distance too far back",B.mode=30;break t}if(x=0,k=f,0===l){if(x+=h-b,b<_){_-=b;do{S[i++]=f[x++]}while(--b);x=i-v,k=S}}else if(l<b){if(x+=h+l-b,b-=l,b<_){_-=b;do{S[i++]=f[x++]}while(--b);if(x=0,l<_){b=l,_-=b;do{S[i++]=f[x++]}while(--b);x=i-v,k=S}}}else if(x+=l-b,b<_){_-=b;do{S[i++]=f[x++]}while(--b);x=i-v,k=S}for(;_>2;)S[i++]=k[x++],S[i++]=k[x++],S[i++]=k[x++],_-=3;_&&(S[i++]=k[x++],_>1&&(S[i++]=k[x++]))}else{x=i-v;do{S[i++]=S[x++],S[i++]=S[x++],S[i++]=S[x++],_-=3}while(_>2);_&&(S[i++]=S[x++],_>1&&(S[i++]=S[x++]))}break}}break}}while(r<n&&i<o);_=d>>3,r-=_,d-=_<<3,c&=(1<<d)-1,t.next_in=r,t.next_out=i,t.avail_in=r<n?n-r+5:5-(r-n),t.avail_out=i<o?o-i+257:257-(i-o),B.hold=c,B.bits=d};const ve=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ke=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ee=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Se=(t,e,r,n,i,s,o,a)=>{const h=a.bits;let u,l,f,c,d,p,g=0,m=0,y=0,w=0,b=0,_=0,v=0,x=0,k=0,E=0,S=null,B=0;const A=new Uint16Array(16),U=new Uint16Array(16);let C,O,I,L=null,T=0;for(g=0;g<=15;g++)A[g]=0;for(m=0;m<n;m++)A[e[r+m]]++;for(b=h,w=15;w>=1&&0===A[w];w--);if(b>w&&(b=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(y=1;y<w&&0===A[y];y++);for(b<y&&(b=y),x=1,g=1;g<=15;g++)if(x<<=1,x-=A[g],x<0)return-1;if(x>0&&(0===t||1!==w))return-1;for(U[1]=0,g=1;g<15;g++)U[g+1]=U[g]+A[g];for(m=0;m<n;m++)0!==e[r+m]&&(o[U[e[r+m]]++]=m);if(0===t?(S=L=o,p=19):1===t?(S=ve,B-=257,L=xe,T-=257,p=256):(S=ke,L=Ee,p=-1),E=0,m=0,g=y,d=s,_=b,v=0,f=-1,k=1<<b,c=k-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){C=g-v,o[m]<p?(O=0,I=o[m]):o[m]>p?(O=L[T+o[m]],I=S[B+o[m]]):(O=96,I=0),u=1<<g-v,l=1<<_,y=l;do{l-=u,i[d+(E>>v)+l]=C<<24|O<<16|I|0}while(0!==l);for(u=1<<g-1;E&u;)u>>=1;if(0!==u?(E&=u-1,E+=u):E=0,m++,0==--A[g]){if(g===w)break;g=e[r+o[m]]}if(g>b&&(E&c)!==f){for(0===v&&(v=b),d+=y,_=g-v,x=1<<_;_+v<w&&(x-=A[_+v],!(x<=0));)_++,x<<=1;if(k+=1<<_,1===t&&k>852||2===t&&k>592)return 1;f=E&c,i[f]=b<<24|_<<16|d-s|0}}return 0!==E&&(i[d+E]=g-v<<24|64<<16|0),a.bits=b,0};const{Z_FINISH:Be,Z_BLOCK:Ae,Z_TREES:Ue,Z_OK:Ce,Z_STREAM_END:Oe,Z_NEED_DICT:Ie,Z_STREAM_ERROR:Le,Z_DATA_ERROR:Te,Z_MEM_ERROR:ze,Z_BUF_ERROR:Re,Z_DEFLATED:Ne}=Q,Fe=12,Pe=30,De=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function Me(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const je=t=>{if(!t||!t.state)return Le;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,Ce},Ze=t=>{if(!t||!t.state)return Le;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,je(t)},$e=(t,e)=>{let r;if(!t||!t.state)return Le;const n=t.state;return e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Le:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Ze(t))},He=(t,e)=>{if(!t)return Le;const r=new Me;t.state=r,r.window=null;const n=$e(t,e);return n!==Ce&&(t.state=null),n};let We,Ve,Ye=!0;const Je=t=>{if(Ye){We=new Int32Array(512),Ve=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Se(1,t.lens,0,288,We,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Se(2,t.lens,0,32,Ve,0,t.work,{bits:5}),Ye=!1}t.lencode=We,t.lenbits=9,t.distcode=Ve,t.distbits=5},qe=(t,e,r,n)=>{let i;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(r-n,r-n+i),s.wnext),(n-=i)?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var Ke=Ze,Ge=He,Xe=(t,e)=>{let r,n,i,s,o,a,h,u,l,f,c,d,p,g,m,y,w,b,_,v,x,k,E=0;const S=new Uint8Array(4);let B,A;const U=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Le;r=t.state,r.mode===Fe&&(r.mode=13),o=t.next_out,i=t.output,h=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,u=r.hold,l=r.bits,f=a,c=h,k=Ce;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===u){r.check=0,S[0]=255&u,S[1]=u>>>8&255,r.check=G(r.check,S,2,0),u=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=Pe;break}if((15&u)!==Ne){t.msg="unknown compression method",r.mode=Pe;break}if(u>>>=4,l-=4,x=8+(15&u),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=Pe;break}r.dmax=1<<r.wbits,t.adler=r.check=1,r.mode=512&u?10:Fe,u=0,l=0;break;case 2:for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==Ne){t.msg="unknown compression method",r.mode=Pe;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=Pe;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=G(r.check,S,2,0)),u=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,S[2]=u>>>16&255,S[3]=u>>>24&255,r.check=G(r.check,S,4,0)),u=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=G(r.check,S,2,0)),u=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(S[0]=255&u,S[1]=u>>>8&255,r.check=G(r.check,S,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(d=r.length,d>a&&(d=a),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+d),x)),512&r.flags&&(r.check=G(r.check,n,d,s)),a-=d,s+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break t;d=0;do{x=n[s+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<a);if(512&r.flags&&(r.check=G(r.check,n,d,s)),a-=d,s+=d,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break t;d=0;do{x=n[s+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<a);if(512&r.flags&&(r.check=G(r.check,n,d,s)),a-=d,s+=d,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=Pe;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Fe;break;case 10:for(;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}t.adler=r.check=De(u),u=0,l=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,Ie;t.adler=r.check=1,r.mode=Fe;case Fe:if(e===Ae||e===Ue)break t;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}switch(r.last=1&u,u>>>=1,l-=1,3&u){case 0:r.mode=14;break;case 1:if(Je(r),r.mode=20,e===Ue){u>>>=2,l-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=Pe}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Pe;break}if(r.length=65535&u,u=0,l=0,r.mode=15,e===Ue)break t;case 15:r.mode=16;case 16:if(d=r.length,d){if(d>a&&(d=a),d>h&&(d=h),0===d)break t;i.set(n.subarray(s,s+d),o),a-=d,s+=d,h-=d,o+=d,r.length-=d;break}r.mode=Fe;break;case 17:for(;l<14;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Pe;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.lens[U[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[U[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,B={bits:r.lenbits},k=Se(0,r.lens,0,19,r.lencode,0,r.work,B),r.lenbits=B.bits,k){t.msg="invalid code lengths set",r.mode=Pe;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;E=r.lencode[u&(1<<r.lenbits)-1],m=E>>>24,y=E>>>16&255,w=65535&E,!(m<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(w<16)u>>>=m,l-=m,r.lens[r.have++]=w;else{if(16===w){for(A=m+2;l<A;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(u>>>=m,l-=m,0===r.have){t.msg="invalid bit length repeat",r.mode=Pe;break}x=r.lens[r.have-1],d=3+(3&u),u>>>=2,l-=2}else if(17===w){for(A=m+3;l<A;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=m,l-=m,x=0,d=3+(7&u),u>>>=3,l-=3}else{for(A=m+7;l<A;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=m,l-=m,x=0,d=11+(127&u),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Pe;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===Pe)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=Pe;break}if(r.lenbits=9,B={bits:r.lenbits},k=Se(1,r.lens,0,r.nlen,r.lencode,0,r.work,B),r.lenbits=B.bits,k){t.msg="invalid literal/lengths set",r.mode=Pe;break}if(r.distbits=6,r.distcode=r.distdyn,B={bits:r.distbits},k=Se(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,B),r.distbits=B.bits,k){t.msg="invalid distances set",r.mode=Pe;break}if(r.mode=20,e===Ue)break t;case 20:r.mode=21;case 21:if(a>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,_e(t,c),o=t.next_out,i=t.output,h=t.avail_out,s=t.next_in,n=t.input,a=t.avail_in,u=r.hold,l=r.bits,r.mode===Fe&&(r.back=-1);break}for(r.back=0;E=r.lencode[u&(1<<r.lenbits)-1],m=E>>>24,y=E>>>16&255,w=65535&E,!(m<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(y&&0==(240&y)){for(b=m,_=y,v=w;E=r.lencode[v+((u&(1<<b+_)-1)>>b)],m=E>>>24,y=E>>>16&255,w=65535&E,!(b+m<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=m,l-=m,r.back+=m,r.length=w,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=Fe;break}if(64&y){t.msg="invalid literal/length code",r.mode=Pe;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(A=r.extra;l<A;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;E=r.distcode[u&(1<<r.distbits)-1],m=E>>>24,y=E>>>16&255,w=65535&E,!(m<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(0==(240&y)){for(b=m,_=y,v=w;E=r.distcode[v+((u&(1<<b+_)-1)>>b)],m=E>>>24,y=E>>>16&255,w=65535&E,!(b+m<=l);){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=m,l-=m,r.back+=m,64&y){t.msg="invalid distance code",r.mode=Pe;break}r.offset=w,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(A=r.extra;l<A;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Pe;break}r.mode=25;case 25:if(0===h)break t;if(d=c-h,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Pe;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=i,p=o-r.offset,d=r.length;d>h&&(d=h),h-=d,r.length-=d;do{i[o++]=g[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;i[o++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===a)break t;a--,u|=n[s++]<<l,l+=8}if(c-=h,t.total_out+=c,r.total+=c,c&&(t.adler=r.check=r.flags?G(r.check,i,c,o-c):q(r.check,i,c,o-c)),c=h,(r.flags?u:De(u))!==r.check){t.msg="incorrect data check",r.mode=Pe;break}u=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===a)break t;a--,u+=n[s++]<<l,l+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=Pe;break}u=0,l=0}r.mode=29;case 29:k=Oe;break t;case Pe:k=Te;break t;case 31:return ze;case 32:default:return Le}return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=a,r.hold=u,r.bits=l,(r.wsize||c!==t.avail_out&&r.mode<Pe&&(r.mode<27||e!==Be))&&qe(t,t.output,t.next_out,c-t.avail_out),f-=t.avail_in,c-=t.avail_out,t.total_in+=f,t.total_out+=c,r.total+=c,r.wrap&&c&&(t.adler=r.check=r.flags?G(r.check,i,c,t.next_out-c):q(r.check,i,c,t.next_out-c)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Fe?128:0)+(20===r.mode||15===r.mode?256:0),(0===f&&0===c||e===Be)&&k===Ce&&(k=Re),k},Qe=t=>{if(!t||!t.state)return Le;let e=t.state;return e.window&&(e.window=null),t.state=null,Ce},tr=(t,e)=>{if(!t||!t.state)return Le;const r=t.state;return 0==(2&r.wrap)?Le:(r.head=e,e.done=!1,Ce)},er=(t,e)=>{const r=e.length;let n,i,s;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?Le:11===n.mode&&(i=1,i=q(i,e,r,0),i!==n.check)?Te:(s=qe(t,e,r,r),s?(n.mode=31,ze):(n.havedict=1,Ce))):Le},rr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const nr=Object.prototype.toString,{Z_NO_FLUSH:ir,Z_FINISH:sr,Z_OK:or,Z_STREAM_END:ar,Z_NEED_DICT:hr,Z_STREAM_ERROR:ur,Z_DATA_ERROR:lr,Z_MEM_ERROR:fr}=Q;function cr(t){this.options=Qt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new oe,this.strm.avail_out=0;let r=Ge(this.strm,e.windowBits);if(r!==or)throw new Error(X[r]);if(this.header=new rr,tr(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=ne(e.dictionary):"[object ArrayBuffer]"===nr.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=er(this.strm,e.dictionary),r!==or)))throw new Error(X[r])}function dr(t,e){const r=new cr(e);if(r.push(t),r.err)throw r.msg||X[r.err];return r.result}cr.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=e===~~e?e:!0===e?sr:ir,"[object ArrayBuffer]"===nr.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Xe(r,o),s===hr&&i&&(s=er(r,i),s===or?s=Xe(r,o):s===lr&&(s=hr));r.avail_in>0&&s===ar&&r.state.wrap>0&&0!==t[r.next_in];)Ke(r),s=Xe(r,o);switch(s){case ur:case lr:case hr:case fr:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===ar))if("string"===this.options.to){let t=se(r.output,r.next_out),e=r.next_out-t,i=ie(r.output,t);r.next_out=e,r.avail_out=n-e,e&&r.output.set(r.output.subarray(t,t+e),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==or||0!==a){if(s===ar)return s=Qe(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},cr.prototype.onData=function(t){this.chunks.push(t)},cr.prototype.onEnd=function(t){t===or&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=te(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var pr={Inflate:cr,inflate:dr,inflateRaw:function(t,e){return(e=e||{}).raw=!0,dr(t,e)},ungzip:dr,constants:Q};const{Deflate:gr,deflate:mr,deflateRaw:yr,gzip:wr}=be,{Inflate:br,inflate:_r,inflateRaw:vr,ungzip:xr}=pr;var kr={Deflate:gr,deflate:mr,deflateRaw:yr,gzip:wr,Inflate:br,inflate:_r,inflateRaw:vr,ungzip:xr,constants:Q};function Er(t,e,r,n){if(r){const r=new Uint8Array(t,e),i=new Uint8Array(n);let s=0,o=0;for(;o<n;)if(n-o>=2&&237==r[s]&&237==r[s+1]){const t=r[s+2],e=r[s+3];for(let r=0;r<t;r++)i[o++]=e;s+=4}else i[o++]=r[s++];return i}return new Uint8Array(t,e,n)}function Sr(t,e){const r=t.getUint32(e,!0);return String.fromCharCode(255&r)+String.fromCharCode((65280&r)>>8)+String.fromCharCode((16711680&r)>>16)+String.fromCharCode(r>>24)}class Br{constructor(t,e){this.pulseLength=t,this.pulseCount=e,this.pulsesGenerated=0}isFinished(){return this.pulsesGenerated==this.pulseCount}getNextPulseLength(){return this.pulsesGenerated++,this.pulseLength}}class Ar{constructor(t){this.pulses=t,this.index=0}isFinished(){return this.index==this.pulses.length}getNextPulseLength(){return this.pulses[this.index++]}}class Ur{constructor(t,e,r,n){this.data=t,this.zeroPulseLength=e,this.onePulseLength=r,this.bitCount=8*(this.data.length-1)+n,this.pulsesOutput=0,this.lastPulseLength=null}isFinished(){return this.pulsesOutput==2*this.bitCount}getNextPulseLength(){if(1&this.pulsesOutput)return this.pulsesOutput++,this.lastPulseLength;{const t=this.pulsesOutput>>1,e=t>>3,r=1<<7-(7&t);return this.lastPulseLength=this.data[e]&r?this.onePulseLength:this.zeroPulseLength,this.pulsesOutput++,this.lastPulseLength}}}class Cr{constructor(t){this.duration=t,this.emitted=!1}isFinished(){return this.emitted}getNextPulseLength(){return this.emitted=!0,3500*this.duration}}class Or{constructor(t){this.segments=[],this.getSegments=t,this.level=0,this.tapeIsFinished=!1,this.pendingCycles=0}addSegment(t){this.segments.push(t)}emitPulses(t,e,r){let n=0,i=e,s=!1;for(;n<r;)if(this.pendingCycles>0)this.pendingCycles>=32768?(t[i++]=32767|this.level,n+=32767,this.pendingCycles-=32767):(t[i++]=this.level|this.pendingCycles,n+=this.pendingCycles,this.pendingCycles=0);else if(0===this.segments.length){if(this.tapeIsFinished){s=!0;break}this.tapeIsFinished=!this.getSegments(this)}else this.segments[0].isFinished()?this.segments.shift():(this.pendingCycles=this.segments[0].getNextPulseLength(),this.level^=32768);return[i,n,s]}}const Ir={49:{row:3,mask:1},50:{row:3,mask:2},51:{row:3,mask:4},52:{row:3,mask:8},53:{row:3,mask:16},54:{row:4,mask:16},55:{row:4,mask:8},56:{row:4,mask:4},57:{row:4,mask:2},48:{row:4,mask:1},81:{row:2,mask:1},87:{row:2,mask:2},69:{row:2,mask:4},82:{row:2,mask:8},84:{row:2,mask:16},89:{row:5,mask:16},85:{row:5,mask:8},73:{row:5,mask:4},79:{row:5,mask:2},80:{row:5,mask:1},65:{row:1,mask:1},83:{row:1,mask:2},68:{row:1,mask:4},70:{row:1,mask:8},71:{row:1,mask:16},72:{row:6,mask:16},74:{row:6,mask:8},75:{row:6,mask:4},76:{row:6,mask:2},13:{row:6,mask:1},16:{row:0,mask:1},192:{row:0,mask:1},90:{row:0,mask:2},88:{row:0,mask:4},67:{row:0,mask:8},86:{row:0,mask:16},66:{row:7,mask:16},78:{row:7,mask:8},77:{row:7,mask:4},17:{row:7,mask:2},32:{row:7,mask:1},8:{row:4,mask:1,caps:!0},37:{row:3,mask:16,caps:!0},38:{row:4,mask:8,caps:!0},39:{row:4,mask:4,caps:!0},40:{row:4,mask:16,caps:!0},188:{row:7,mask:10},190:{row:7,mask:6}};class Lr{constructor(t){this.worker=t,this.keydownHandler=t=>{const e=Ir[t.keyCode];e&&(this.worker.postMessage({message:"keyDown",row:e.row,mask:e.mask}),e.caps&&this.worker.postMessage({message:"keyDown",row:0,mask:1})),t.metaKey||t.preventDefault()},this.keyupHandler=t=>{const e=Ir[t.keyCode];e&&(this.worker.postMessage({message:"keyUp",row:e.row,mask:e.mask}),e.caps&&this.worker.postMessage({message:"keyUp",row:0,mask:1})),t.metaKey||t.preventDefault()},this.keypressHandler=t=>{t.metaKey||t.preventDefault()}}start(){document.addEventListener("keydown",this.keydownHandler),document.addEventListener("keyup",this.keyupHandler),document.addEventListener("keypress",this.keypressHandler)}stop(){document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("keyup",this.keyupHandler),document.removeEventListener("keypress",this.keypressHandler)}}const Tr=65536;class zr{constructor(){this.isActive=!1}start(){const t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t({latencyHint:"interactive"}),this.samplesPerFrame=this.audioContext.sampleRate/50,this.frameBuffers=[new ArrayBuffer(4*this.samplesPerFrame),new ArrayBuffer(4*this.samplesPerFrame)],this.leftBuffer=new Float32Array(Tr),this.rightBuffer=new Float32Array(Tr),this.readPtr=0,this.writePtr=0,this.scriptNode=this.audioContext.createScriptProcessor(0,0,2),this.scriptNode.onaudioprocess=t=>{const e=t.outputBuffer,r=e.getChannelData(0),n=e.getChannelData(1);let i=this.writePtr-this.readPtr;if(i<0&&(i+=Tr),i>=r.length)if(this.readPtr+r.length<=Tr)r.set(this.leftBuffer.slice(this.readPtr,this.readPtr+r.length)),n.set(this.rightBuffer.slice(this.readPtr,this.readPtr+n.length)),this.readPtr=(this.readPtr+r.length)%Tr;else{const t=Tr-this.readPtr,e=r.length-t;r.set(this.leftBuffer.slice(this.readPtr,this.readPtr+t)),n.set(this.rightBuffer.slice(this.readPtr,this.readPtr+t)),r.set(this.leftBuffer.slice(0,e),t),n.set(this.rightBuffer.slice(0,e),t),this.readPtr=e}},this.scriptNode.connect(this.audioContext.destination),this.isActive=!0}stop(){this.scriptNode.disconnect(this.audioContext.destination),this.audioContext.close()}frameCompleted(t,e){if(this.frameBuffers[0]=t,this.frameBuffers[1]=e,!this.isActive)return;const r=t.byteLength/4;if(this.writePtr+r<=Tr){const n=new Float32Array(t),i=new Float32Array(e);this.leftBuffer.set(n,this.writePtr),this.rightBuffer.set(i,this.writePtr),this.writePtr=(this.writePtr+r)%Tr}else{const n=Tr-this.writePtr,i=r-n,s=new Float32Array(t,0,n),o=new Float32Array(e,0,n);this.leftBuffer.set(s,this.writePtr),this.rightBuffer.set(o,this.writePtr);const a=new Float32Array(t,4*n,i),h=new Float32Array(e,4*n,i);this.leftBuffer.set(a,0),this.rightBuffer.set(h,0),this.writePtr=i}}drawOscilloscope(t,e){this.canvasCtx.fillStyle="#000",this.canvasCtx.strokeStyle="#0f0",this.canvasCtx.fillRect(0,0,this.samplesPerFrame,64);const r=new Float32Array(t);this.canvasCtx.beginPath(),this.canvasCtx.moveTo(0,16);for(let t=0;t<this.samplesPerFrame;t++)this.canvasCtx.lineTo(t,16-16*r[t]);this.canvasCtx.stroke();const n=new Float32Array(e);this.canvasCtx.beginPath(),this.canvasCtx.moveTo(0,48);for(let t=0;t<this.samplesPerFrame;t++)this.canvasCtx.lineTo(t,48-16*n[t]);this.canvasCtx.stroke()}}for(var Rr=[],Nr=[],Fr="undefined"!=typeof Uint8Array?Uint8Array:Array,Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dr=0,Mr=Pr.length;Dr<Mr;++Dr)Rr[Dr]=Pr[Dr],Nr[Pr.charCodeAt(Dr)]=Dr;function jr(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function Zr(t,e,r){for(var n,i,s=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(Rr[(i=n)>>18&63]+Rr[i>>12&63]+Rr[i>>6&63]+Rr[63&i]);return s.join("")}Nr["-".charCodeAt(0)]=62,Nr["_".charCodeAt(0)]=63;var $r,Hr=function(t){var e,r,n=jr(t),i=n[0],s=n[1],o=new Fr(function(t,e,r){return 3*(e+r)/4-r}(0,i,s)),a=0,h=s>0?i-4:i;for(r=0;r<h;r+=4)e=Nr[t.charCodeAt(r)]<<18|Nr[t.charCodeAt(r+1)]<<12|Nr[t.charCodeAt(r+2)]<<6|Nr[t.charCodeAt(r+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===s&&(e=Nr[t.charCodeAt(r)]<<2|Nr[t.charCodeAt(r+1)]>>4,o[a++]=255&e),1===s&&(e=Nr[t.charCodeAt(r)]<<10|Nr[t.charCodeAt(r+1)]<<4|Nr[t.charCodeAt(r+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o},Wr=function(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Zr(t,o,o+s>a?a:o+s));return 1===n?(e=t[r-1],i.push(Rr[e>>2]+Rr[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(Rr[e>>10]+Rr[e>>4&63]+Rr[e<<2&63]+"=")),i.join("")},Vr=function(t,e,r,n,i){var s,o,a=8*i-n-1,h=(1<<a)-1,u=h>>1,l=-7,f=r?i-1:0,c=r?-1:1,d=t[e+f];for(f+=c,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+t[e+f],f+=c,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+t[e+f],f+=c,l-=8);if(0===s)s=1-u;else{if(s===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=u}return(d?-1:1)*o*Math.pow(2,s-n)},Yr=function(t,e,r,n,i,s){var o,a,h,u=8*s-i-1,l=(1<<u)-1,f=l>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+f>=1?c/h:c*Math.pow(2,1-f))*h>=2&&(o++,h/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(e*h-1)*Math.pow(2,i),o+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*g},Jr=(function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=function(t){return+t!=t&&(t=0),s.alloc(+t)},e.INSPECT_MAX_BYTES=50;var n=2147483647;function i(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return o(t,e,r)}function o(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|c(t,e),n=i(r),o=n.write(t,e);return o!==r&&(n=n.slice(0,o)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(P(t,Uint8Array)){var e=new Uint8Array(t);return l(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t));if(P(t,ArrayBuffer)||t&&P(t.buffer,ArrayBuffer))return l(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(P(t,SharedArrayBuffer)||t&&P(t.buffer,SharedArrayBuffer)))return l(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return s.from(n,e,r);var o=function(t){if(s.isBuffer(t)){var e=0|f(t.length),r=i(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||D(t.length)?i(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t))}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return a(t),i(t<0?0:0|f(t))}function u(t){for(var e=t.length<0?0:0|f(t.length),r=i(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function l(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,s.prototype),n}function f(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function c(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||P(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(t));var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(t).length;default:if(i)return n?-1:R(t).length;e=(""+e).toLowerCase(),i=!0}}function d(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return k(this,e,r);case"ascii":return S(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),D(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var s,o=1,a=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var l=-1;for(s=r;s<a;s++)if(u(t,s)===u(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===h)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+h>a&&(r=a-h),s=r;s>=0;s--){for(var f=!0,c=0;c<h;c++)if(u(t,s+c)!==u(e,c)){f=!1;break}if(f)return s}return-1}function y(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=e.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(D(a))return o;t[r+o]=a}return o}function w(t,e,r,n){return F(R(e,t.length-r),t,r,n)}function b(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return F(N(e),t,r,n)}function v(t,e,r,n){return F(function(t,e){for(var r,n,i,s=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?Wr(t):Wr(t.slice(e,r))}function k(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var s,o,a,h,u=t[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(s=t[i+1]))&&(h=(31&u)<<6|63&s)>127&&(l=h);break;case 3:s=t[i+1],o=t[i+2],128==(192&s)&&128==(192&o)&&(h=(15&u)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(l=h);break;case 4:s=t[i+1],o=t[i+2],a=t[i+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(h=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(l=h)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=E));return r}(n)}e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,r){return o(t,e,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?i(t):void 0!==e?"string"==typeof r?i(t).fill(e,r):i(t).fill(e):i(t)}(t,e,r)},s.allocUnsafe=function(t){return h(t)},s.allocUnsafeSlow=function(t){return h(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(P(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),P(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=s.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(P(o,Uint8Array))i+o.length>n.length?s.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},s.byteLength=c,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},s.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):d.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(t,e,r,n,i){if(P(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(t));if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),h=Math.min(o,a),u=this.slice(n,i),l=t.slice(e,r),f=0;f<h;++f)if(u[f]!==l[f]){o=u[f],a=l[f];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return y(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":case"latin1":case"binary":return b(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function S(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=e;s<r;++s)i+=M[t[s]];return i}function U(t,e,r){for(var n=t.slice(e,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function C(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,i){return e=+e,r>>>=0,i||I(t,0,r,4),Yr(t,e,r,n,23,4),r+4}function T(t,e,r,n,i){return e=+e,r>>>=0,i||I(t,0,r,8),Yr(t,e,r,n,52,8),r+8}s.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=this[t],i=1,s=0;++s<e&&(i*=256);)n+=this[t+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||C(t,e,this.length);for(var n=e,i=1,s=this[t+--n];n>0&&(i*=256);)s+=this[t+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*e)),s},s.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),Vr(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),Vr(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),Vr(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),Vr(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var s=0,o=1,a=0;for(this[e]=255&t;++s<r&&(o*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/o>>0)-a&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return T(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return T(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},s.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=s.isBuffer(t)?t:s.from(t,n),h=a.length;if(0===h)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=a[o%h]}return this};var z=/[^+/0-9A-Za-z-_]/g;function R(t,e){var r;e=e||1/0;for(var n=t.length,i=null,s=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function N(t){return Hr(function(t){if((t=(t=t.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function P(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function D(t){return t!=t}var M=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()}($r={exports:{}},$r.exports),$r.exports),qr=Jr.Buffer;Jr.SlowBuffer,Jr.INSPECT_MAX_BYTES,Jr.kMaxLength;var Kr=function(t,e){return(Kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Gr(t,e){function r(){this.constructor=t}Kr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Xr=function(){return(Xr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Qr=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Gr(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),tn=function(t){function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Gr(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function en(t){return t&&t.Math==Math&&t}function rn(){return en("object"==typeof globalThis&&globalThis)||en("object"==typeof window&&window)||en("object"==typeof self&&self)||en("object"==typeof r.g&&r.g)||Function("return this")()}var nn=function(t){var e,r="object"==typeof(e=rn()).navigator&&"ReactNative"===e.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=qr.alloc(t),i=0;i<t;++i)n[i]=Math.floor(256*Math.random());return n},sn=function(){if("undefined"!=typeof window){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(qr.alloc(e))}}return void 0!==r.g&&r.g.crypto&&r.g.crypto.getRandomValues?function(t){return r.g.crypto.getRandomValues(qr.alloc(t))}:nn}();function on(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function an(t){return"[object BigInt64Array]"===Object.prototype.toString.call(t)}function hn(t){return"[object BigUint64Array]"===Object.prototype.toString.call(t)}function un(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function ln(t){return fn(t)&&"[object Date]"===Object.prototype.toString.call(t)}function fn(t){return"object"==typeof t&&null!==t}function cn(t,e){var r=!1;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r||(console.warn(e),r=!0),t.apply(this,n)}}function dn(t){if(ArrayBuffer.isView(t))return qr.from(t.buffer,t.byteOffset,t.byteLength);if(e=t,["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e)))return qr.from(t);var e;throw new tn("Must use either Buffer or TypedArray")}var pn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,gn=function(t){return"string"==typeof t&&pn.test(t)},mn=function(t){if(!gn(t))throw new tn('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return qr.from(e,"hex")},yn=function(t,e){return void 0===e&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},wn=(Math.pow(2,63),Math.pow(2,63),Math.pow(2,53)),bn=-Math.pow(2,53),_n=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new tn("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=r?r:t.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=qr.alloc(t.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=qr.from(e,"binary"):Array.isArray(e)?this.buffer=qr.from(e):this.buffer=dn(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if("string"==typeof e&&1!==e.length)throw new tn("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new tn("only accepts single character Uint8Array or Array");var r;if((r="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||r>255)throw new tn("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=qr.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(t,e){if(e="number"==typeof e?e:this.position,this.buffer.length<e+t.length){var r=qr.alloc(this.buffer.length+t.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r}ArrayBuffer.isView(t)?(this.buffer.set(dn(t),e),this.position=e+t.byteLength>this.position?e+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,e,t.length,"binary"),this.position=e+t.length>this.position?e+t.length:this.position)},t.prototype.read=function(t,e){return e=e&&e>0?e:this.position,this.buffer.slice(t,t+e)},t.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(t){return this.buffer.toString(t)},t.prototype.toExtendedJSON=function(t){t=t||{};var e=this.buffer.toString("base64"),r=Number(this.sub_type).toString(16);return t.legacy?{$binary:e,$type:1===r.length?"0"+r:r}:{$binary:{base64:e,subType:1===r.length?"0"+r:r}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new vn(this.buffer.slice(0,this.position));throw new Qr('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,r){var n,i;if(r=r||{},"$binary"in e?r.legacy&&"string"==typeof e.$binary&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=qr.from(e.$binary,"base64")):"string"!=typeof e.$binary&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=qr.from(e.$binary.base64,"base64")):"$uuid"in e&&(i=4,n=mn(e.$uuid)),!n)throw new tn("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return 4===i?new vn(n):new t(n,i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(_n.prototype,"_bsontype",{value:"Binary"});var vn=function(t){function e(r){var n,i,s=this;if(null==r)n=e.generate();else if(r instanceof e)n=qr.from(r.buffer),i=r.__id;else if(ArrayBuffer.isView(r)&&16===r.byteLength)n=dn(r);else{if("string"!=typeof r)throw new tn("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");n=mn(r)}return(s=t.call(this,n,4)||this).__id=i,s}return Gr(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer},set:function(t){this.buffer=t,e.cacheHexString&&(this.__id=yn(t))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(t){if(void 0===t&&(t=!0),e.cacheHexString&&this.__id)return this.__id;var r=yn(this.id,t);return e.cacheHexString&&(this.__id=r),r},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(!t)return!1;if(t instanceof e)return t.id.equals(this.id);try{return new e(t).id.equals(this.id)}catch(t){return!1}},e.prototype.toBinary=function(){return new _n(this.id,_n.SUBTYPE_UUID)},e.generate=function(){var t=sn(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,qr.from(t)},e.isValid=function(t){return!!t&&(t instanceof e||("string"==typeof t?gn(t):!!on(t)&&16===t.length&&64==(240&t[6])&&128==(128&t[8])))},e.createFromHexString=function(t){return new e(mn(t))},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},e}(_n),xn=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},t}();function kn(t){return fn(t)&&null!=t.$id&&"string"==typeof t.$ref&&(null==t.$db||"string"==typeof t.$db)}Object.defineProperty(xn.prototype,"_bsontype",{value:"Code"});var En=function(){function t(e,r,n,i){if(!(this instanceof t))return new t(e,r,n,i);var s=e.split(".");2===s.length&&(n=s.shift(),e=s.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},t.prototype.toExtendedJSON=function(t){t=t||{};var e={$ref:this.collection,$id:this.oid};return t.legacy?e:(this.db&&(e.$db=this.db),e=Object.assign(e,this.fields))},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(En.prototype,"_bsontype",{value:"DBRef"});var Sn=void 0;try{Sn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}var Bn=4294967296,An=0x10000000000000000,Un=An/2,Cn={},On={},In=function(){function t(e,r,n){if(void 0===e&&(e=0),!(this instanceof t))return new t(e,r,n);"bigint"==typeof e?Object.assign(this,t.fromBigInt(e,!!r)):"string"==typeof e?Object.assign(this,t.fromString(e,!!r)):(this.low=0|e,this.high=0|r,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,i,s;return r?(s=0<=(e>>>=0)&&e<256)&&(i=On[e])?i:(n=t.fromBits(e,(0|e)<0?-1:0,!0),s&&(On[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(i=Cn[e])?i:(n=t.fromBits(e,e<0?-1:0,!1),s&&(Cn[e]=n),n)},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=An)return t.MAX_UNSIGNED_VALUE}else{if(e<=-Un)return t.MIN_VALUE;if(e+1>=Un)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%Bn|0,e/Bn|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof r?(n=r,r=!1):r=!!r,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return t.fromString(e.substring(1),r,n).neg();for(var s=t.fromNumber(Math.pow(n,8)),o=t.ZERO,a=0;a<e.length;a+=8){var h=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+h),n);if(h<8){var l=t.fromNumber(Math.pow(n,h));o=o.mul(l).add(t.fromNumber(u))}else o=(o=o.mul(s)).add(t.fromNumber(u))}return o.unsigned=r,o},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(t){return fn(t)&&!0===t.__isLong__},t.fromValue=function(e,r){return"number"==typeof e?t.fromNumber(e,r):"string"==typeof e?t.fromString(e,r):t.fromBits(e.low,e.high,"boolean"==typeof r?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,a=65535&e.high,h=e.low>>>16,u=0,l=0,f=0,c=0;return f+=(c+=s+(65535&e.low))>>>16,c&=65535,l+=(f+=i+h)>>>16,f&=65535,u+=(l+=n+a)>>>16,l&=65535,u+=r+o,u&=65535,t.fromBits(f<<16|c,u<<16|l,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(t){return this.compare(t)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(Sn){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var r=(this.unsigned?Sn.div_u:Sn.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Sn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,i,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;s=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(n=this.shr(1).div(e).shl(1)).eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(n)),s=n.add(i.div(e)));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=t.ZERO}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),a=o<=48?1:Math.pow(2,o-48),h=t.fromNumber(n),u=h.mul(e);u.isNegative()||u.gt(i);)n-=a,u=(h=t.fromNumber(n,this.unsigned)).mul(e);h.isZero()&&(h=t.ONE),s=s.add(h),i=i.sub(u)}return s},t.prototype.div=function(t){return this.divide(t)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.prototype.eq=function(t){return this.equals(t)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e,r=0!==this.high?this.high:this.low;for(e=31;e>0&&0==(r&1<<e);e--);return 0!==this.high?e+33:e+1},t.prototype.greaterThan=function(t){return this.comp(t)>0},t.prototype.gt=function(t){return this.greaterThan(t)},t.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},t.prototype.gte=function(t){return this.greaterThanOrEqual(t)},t.prototype.ge=function(t){return this.greaterThanOrEqual(t)},t.prototype.isEven=function(){return 0==(1&this.low)},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return 1==(1&this.low)},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.lessThan=function(t){return this.comp(t)<0},t.prototype.lt=function(t){return this.lessThan(t)},t.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},t.prototype.lte=function(t){return this.lessThanOrEqual(t)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),Sn){var r=(this.unsigned?Sn.rem_u:Sn.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Sn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(t){return this.modulo(t)},t.prototype.rem=function(t){return this.modulo(t)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Sn){var r=Sn.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,Sn.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,s=this.low>>>16,o=65535&this.low,a=e.high>>>16,h=65535&e.high,u=e.low>>>16,l=65535&e.low,f=0,c=0,d=0,p=0;return d+=(p+=o*l)>>>16,p&=65535,c+=(d+=s*l)>>>16,d&=65535,c+=(d+=o*u)>>>16,d&=65535,f+=(c+=i*l)>>>16,c&=65535,f+=(c+=s*u)>>>16,c&=65535,f+=(c+=o*h)>>>16,c&=65535,f+=n*l+i*u+s*h+o*a,f&=65535,t.fromBits(d<<16|p,f<<16|c,this.unsigned)},t.prototype.mul=function(t){return this.multiply(t)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.neq=function(t){return this.notEquals(t)},t.prototype.ne=function(t){return this.notEquals(t)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(t){return this.shiftLeft(t)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(t){return this.shiftRight(t)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}return 32===e?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},t.prototype.shru=function(t){return this.shiftRightUnsigned(t)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(t){return this.subtract(t)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Bn+(this.low>>>0):this.high*Bn+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),i=n.mul(r).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var s=t.fromNumber(Math.pow(e,6),this.unsigned),o=this,a="";;){var h=o.div(s),u=(o.sub(h.mul(s)).toInt()>>>0).toString(e);if((o=h).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(t){return this.lessThanOrEqual(t)},t.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(16777216),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(In.prototype,"__isLong__",{value:!0}),Object.defineProperty(In.prototype,"_bsontype",{value:"Long"});var Ln=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Tn=/^(\+|-)?(Infinity|inf)$/i,zn=/^(\+|-)?NaN$/i,Rn=6111,Nn=-6176,Fn=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Pn=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Dn=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Mn=/^([-+])?(\d+)?$/;function jn(t){return!isNaN(parseInt(t,10))}function Zn(t){var e=In.fromNumber(1e9),r=In.fromNumber(0);if(!(t.parts[0]||t.parts[1]||t.parts[2]||t.parts[3]))return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new In(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function $n(t,e){throw new tn('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var Hn=function(){function t(e){if(!(this instanceof t))return new t(e);if("string"==typeof e)this.bytes=t.fromString(e).bytes;else{if(!on(e))throw new tn("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new tn("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}return t.fromString=function(e){var r,n=!1,i=!1,s=!1,o=0,a=0,h=0,u=0,l=0,f=[0],c=0,d=0,p=0,g=0,m=0,y=0,w=new In(0,0),b=new In(0,0),_=0;if(e.length>=7e3)throw new tn(e+" not a valid Decimal128 string");var v=e.match(Ln),x=e.match(Tn),k=e.match(zn);if(!v&&!x&&!k||0===e.length)throw new tn(e+" not a valid Decimal128 string");if(v){var E=v[2],S=v[4],B=v[5],A=v[6];S&&void 0===A&&$n(e,"missing exponent power"),S&&void 0===E&&$n(e,"missing exponent base"),void 0===S&&(B||A)&&$n(e,"missing e before exponent")}if("+"!==e[_]&&"-"!==e[_]||(n="-"===e[_++]),!jn(e[_])&&"."!==e[_]){if("i"===e[_]||"I"===e[_])return new t(qr.from(n?Pn:Dn));if("N"===e[_])return new t(qr.from(Fn))}for(;jn(e[_])||"."===e[_];)"."!==e[_]?(c<34&&("0"!==e[_]||s)&&(s||(l=a),s=!0,f[d++]=parseInt(e[_],10),c+=1),s&&(h+=1),i&&(u+=1),a+=1,_+=1):(i&&$n(e,"contains multiple periods"),i=!0,_+=1);if(i&&!a)throw new tn(e+" not a valid Decimal128 string");if("e"===e[_]||"E"===e[_]){var U=e.substr(++_).match(Mn);if(!U||!U[2])return new t(qr.from(Fn));m=parseInt(U[0],10),_+=U[0].length}if(e[_])return new t(qr.from(Fn));if(p=0,c){if(g=c-1,1!==(o=h))for(;0===f[l+o-1];)o-=1}else p=0,g=0,f[0]=0,h=1,c=1,o=0;for(m<=u&&u-m>16384?m=Nn:m-=u;m>Rn;){if((g+=1)-p>34){if(f.join("").match(/^0+$/)){m=Rn;break}$n(e,"overflow")}m-=1}for(;m<Nn||c<h;){if(0===g&&o<c){m=Nn,o=0;break}if(c<h?h-=1:g-=1,m<Rn)m+=1;else{if(f.join("").match(/^0+$/)){m=Rn;break}$n(e,"overflow")}}if(g-p+1<o){var C=a;i&&(l+=1,C+=1),n&&(l+=1,C+=1);var O=parseInt(e[l+g+1],10),I=0;if(O>=5&&(I=1,5===O))for(I=f[g]%2==1?1:0,y=l+g+2;y<C;y++)if(parseInt(e[y],10)){I=1;break}if(I)for(var L=g;L>=0;L--)if(++f[L]>9&&(f[L]=0,0===L)){if(!(m<Rn))return new t(qr.from(n?Pn:Dn));m+=1,f[L]=1}}if(w=In.fromNumber(0),b=In.fromNumber(0),0===o)w=In.fromNumber(0),b=In.fromNumber(0);else if(g-p<17)for(L=p,b=In.fromNumber(f[L++]),w=new In(0,0);L<=g;L++)b=(b=b.multiply(In.fromNumber(10))).add(In.fromNumber(f[L]));else{for(L=p,w=In.fromNumber(f[L++]);L<=g-17;L++)w=(w=w.multiply(In.fromNumber(10))).add(In.fromNumber(f[L]));for(b=In.fromNumber(f[L++]);L<=g;L++)b=(b=b.multiply(In.fromNumber(10))).add(In.fromNumber(f[L]))}var T,z,R,N,F=function(t,e){if(!t&&!e)return{high:In.fromNumber(0),low:In.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new In(t.getLowBits(),0),i=e.shiftRightUnsigned(32),s=new In(e.getLowBits(),0),o=r.multiply(i),a=r.multiply(s),h=n.multiply(i),u=n.multiply(s);return o=o.add(a.shiftRightUnsigned(32)),a=new In(a.getLowBits(),0).add(h).add(u.shiftRightUnsigned(32)),{high:o=o.add(a.shiftRightUnsigned(32)),low:u=a.shiftLeft(32).add(new In(u.getLowBits(),0))}}(w,In.fromString("100000000000000000"));F.low=F.low.add(b),z=b,((R=(T=F.low).high>>>0)<(N=z.high>>>0)||R===N&&T.low>>>0<z.low>>>0)&&(F.high=F.high.add(In.fromNumber(1))),r=m+6176;var P={low:In.fromNumber(0),high:In.fromNumber(0)};F.high.shiftRightUnsigned(49).and(In.fromNumber(1)).equals(In.fromNumber(1))?(P.high=P.high.or(In.fromNumber(3).shiftLeft(61)),P.high=P.high.or(In.fromNumber(r).and(In.fromNumber(16383).shiftLeft(47))),P.high=P.high.or(F.high.and(In.fromNumber(0x7fffffffffff)))):(P.high=P.high.or(In.fromNumber(16383&r).shiftLeft(49)),P.high=P.high.or(F.high.and(In.fromNumber(562949953421311)))),P.low=F.low,n&&(P.high=P.high.or(In.fromString("9223372036854775808")));var D=qr.alloc(16);return _=0,D[_++]=255&P.low.low,D[_++]=P.low.low>>8&255,D[_++]=P.low.low>>16&255,D[_++]=P.low.low>>24&255,D[_++]=255&P.low.high,D[_++]=P.low.high>>8&255,D[_++]=P.low.high>>16&255,D[_++]=P.low.high>>24&255,D[_++]=255&P.high.low,D[_++]=P.high.low>>8&255,D[_++]=P.high.low>>16&255,D[_++]=P.high.low>>24&255,D[_++]=255&P.high.high,D[_++]=P.high.high>>8&255,D[_++]=P.high.high>>16&255,D[_++]=P.high.high>>24&255,new t(D)},t.prototype.toString=function(){for(var t,e=0,r=new Array(36),n=0;n<r.length;n++)r[n]=0;var i,s,o,a=0,h=!1,u={parts:[0,0,0,0]},l=[];a=0;var f=this.bytes,c=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24,d=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24,p=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24,g=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24;a=0,(new In(c,d),new In(p,g)).lessThan(In.ZERO)&&l.push("-");var m=g>>26&31;if(m>>3==3){if(30===m)return l.join("")+"Infinity";if(31===m)return"NaN";t=g>>15&16383,i=8+(g>>14&1)}else i=g>>14&7,t=g>>17&16383;var y=t-6176;if(u.parts[0]=(16383&g)+((15&i)<<14),u.parts[1]=p,u.parts[2]=d,u.parts[3]=c,0===u.parts[0]&&0===u.parts[1]&&0===u.parts[2]&&0===u.parts[3])h=!0;else for(o=3;o>=0;o--){var w=0,b=Zn(u);if(u=b.quotient,w=b.rem.low)for(s=8;s>=0;s--)r[9*o+s]=w%10,w=Math.floor(w/10)}if(h)e=1,r[a]=0;else for(e=36;!r[a];)e-=1,a+=1;var _=e-1+y;if(_>=34||_<=-7||y>0){if(e>34)return l.push("".concat(0)),y>0?l.push("E+".concat(y)):y<0&&l.push("E".concat(y)),l.join("");for(l.push("".concat(r[a++])),(e-=1)&&l.push("."),n=0;n<e;n++)l.push("".concat(r[a++]));l.push("E"),_>0?l.push("+".concat(_)):l.push("".concat(_))}else if(y>=0)for(n=0;n<e;n++)l.push("".concat(r[a++]));else{var v=e+y;if(v>0)for(n=0;n<v;n++)l.push("".concat(r[a++]));else l.push("0");for(l.push(".");v++<0;)l.push("0");for(n=0;n<e-Math.max(v-1,0);n++)l.push("".concat(r[a++]))}return l.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(Hn.prototype,"_bsontype",{value:"Decimal128"});var Wn=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:(Number.isInteger(this.value)?(e=this.value.toFixed(1)).length>=13&&(e=this.value.toExponential(13).toUpperCase()):e=this.value.toString(),{$numberDouble:e});var e},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},t}();Object.defineProperty(Wn.prototype,"_bsontype",{value:"Double"});var Vn=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=0|+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty(Vn.prototype,"_bsontype",{value:"Int32"});var Yn=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(Yn.prototype,"_bsontype",{value:"MaxKey"});var Jn=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(Jn.prototype,"_bsontype",{value:"MinKey"});var qn=new RegExp("^[0-9a-fA-F]{24}$"),Kn=null,Gn=Symbol("id"),Xn=function(){function t(e){if(!(this instanceof t))return new t(e);var r;if("object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new tn("Argument passed in must have an id that is of type string or Buffer");r="toHexString"in e&&"function"==typeof e.toHexString?qr.from(e.toHexString(),"hex"):e.id}else r=e;if(null==r||"number"==typeof r)this[Gn]=t.generate("number"==typeof r?r:void 0);else if(ArrayBuffer.isView(r)&&12===r.byteLength)this[Gn]=r instanceof qr?r:dn(r);else{if("string"!=typeof r)throw new tn("Argument passed in does not match the accepted types");if(12===r.length){var n=qr.from(r);if(12!==n.byteLength)throw new tn("Argument passed in must be a string of 12 bytes");this[Gn]=n}else{if(24!==r.length||!qn.test(r))throw new tn("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[Gn]=qr.from(r,"hex")}}t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[Gn]},set:function(e){this[Gn]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));var r=t.getInc(),n=qr.alloc(12);return n.writeUInt32BE(e,0),null===Kn&&(Kn=sn(5)),n[4]=Kn[0],n[5]=Kn[1],n[6]=Kn[2],n[7]=Kn[3],n[8]=Kn[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(null==e)return!1;if(e instanceof t)return this[Gn][11]===e[Gn][11]&&this[Gn].equals(e[Gn]);if("string"==typeof e&&t.isValid(e)&&12===e.length&&on(this.id))return e===qr.prototype.toString.call(this.id,"latin1");if("string"==typeof e&&t.isValid(e)&&24===e.length)return e.toLowerCase()===this.toHexString();if("string"==typeof e&&t.isValid(e)&&12===e.length)return qr.from(e).equals(this.id);if("object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString){var r=e.toHexString(),n=this.toHexString().toLowerCase();return"string"==typeof r&&r.toLowerCase()===n}return!1},t.prototype.getTimestamp=function(){var t=new Date,e=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(e)),t},t.createPk=function(){return new t},t.createFromTime=function(e){var r=qr.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new tn("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(qr.from(e,"hex"))},t.isValid=function(e){if(null==e)return!1;try{return new t(e),!0}catch(t){return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(16777215*Math.random()),t}();Object.defineProperty(Xn.prototype,"generate",{value:cn((function(t){return Xn.generate(t)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(Xn.prototype,"getInc",{value:cn((function(){return Xn.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Xn.prototype,"get_inc",{value:cn((function(){return Xn.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Xn,"get_inc",{value:cn((function(){return Xn.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Xn.prototype,"_bsontype",{value:"ObjectID"});var Qn=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.pattern=e,this.options=(null!=r?r:"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new Qr("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(-1!==this.options.indexOf("\0"))throw new Qr("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Qr("The regular expression option [".concat(this.options[n],"] is not supported"))}return t.parseOptions=function(t){return t?t.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e){if("string"==typeof e.$regex)return new t(e.$regex,t.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new tn("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(Qn.prototype,"_bsontype",{value:"BSONRegExp"});var ti=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(ti.prototype,"_bsontype",{value:"Symbol"});var ei=function(t){function e(r,n){var i=this;return i instanceof e?(i=In.isLong(r)?t.call(this,r.low,r.high,!0)||this:fn(r)&&void 0!==r.t&&void 0!==r.i?t.call(this,r.i,r.t,!0)||this:t.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new e(r,n)}return Gr(e,t),e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(t){return new e(In.fromInt(t,!0))},e.fromNumber=function(t){return new e(In.fromNumber(t,!0))},e.fromBits=function(t,r){return new e(t,r)},e.fromString=function(t,r){return new e(In.fromString(t,!0,r))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(t){return new e(t.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=In.MAX_UNSIGNED_VALUE,e}(In);function ri(t){return fn(t)&&Reflect.has(t,"_bsontype")&&"string"==typeof t._bsontype}var ni=2147483647,ii=-2147483648,si=0x8000000000000000,oi=-0x8000000000000000,ai={$oid:Xn,$binary:_n,$uuid:_n,$symbol:ti,$numberInt:Vn,$numberDecimal:Hn,$numberDouble:Wn,$numberLong:In,$minKey:Jn,$maxKey:Yn,$regex:Qn,$regularExpression:Qn,$timestamp:ei};function hi(t,e){if(void 0===e&&(e={}),"number"==typeof t){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=ii&&t<=ni)return new Vn(t);if(t>=oi&&t<=si)return In.fromNumber(t)}return new Wn(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter((function(e){return e.startsWith("$")&&null!=t[e]})),n=0;n<r.length;n++){var i=ai[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(null!=t.$date){var s=t.$date,o=new Date;return e.legacy?"number"==typeof s?o.setTime(s):"string"==typeof s&&o.setTime(Date.parse(s)):"string"==typeof s?o.setTime(Date.parse(s)):In.isLong(s)?o.setTime(s.toNumber()):"number"==typeof s&&e.relaxed&&o.setTime(s),o}if(null!=t.$code){var a=Object.assign({},t);return t.$scope&&(a.$scope=hi(t.$scope)),xn.fromExtendedJSON(t)}if(kn(t)||t.$dbPointer){var h=t.$ref?t:t.$dbPointer;if(h instanceof En)return h;var u=Object.keys(h).filter((function(t){return t.startsWith("$")})),l=!0;if(u.forEach((function(t){-1===["$ref","$id","$db"].indexOf(t)&&(l=!1)})),l)return En.fromExtendedJSON(h)}return t}function ui(t){var e=t.toISOString();return 0!==t.getUTCMilliseconds()?e:e.slice(0,-5)+"Z"}function li(t,e){if(("object"==typeof t||"function"==typeof t)&&null!==t){var r=e.seenObjects.findIndex((function(e){return e.obj===t}));if(-1!==r){var n=e.seenObjects.map((function(t){return t.propertyName})),i=n.slice(0,r).map((function(t){return"".concat(t," -> ")})).join(""),s=n[r],o=" -> "+n.slice(r+1,n.length-1).map((function(t){return"".concat(t," -> ")})).join(""),a=n[n.length-1],h=" ".repeat(i.length+s.length/2),u="-".repeat(o.length+(s.length+a.length)/2-1);throw new tn("Converting circular structure to EJSON:\n"+"    ".concat(i).concat(s).concat(o).concat(a,"\n")+"    ".concat(h,"\\").concat(u,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return function(t,e){return t.map((function(t,r){e.seenObjects.push({propertyName:"index ".concat(r),obj:null});try{return li(t,e)}finally{e.seenObjects.pop()}}))}(t,e);if(void 0===t)return null;if(t instanceof Date||ln(t)){var l=t.getTime(),f=l>-1&&l<2534023188e5;return e.legacy?e.relaxed&&f?{$date:t.getTime()}:{$date:ui(t)}:e.relaxed&&f?{$date:ui(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(!("number"!=typeof t||e.relaxed&&isFinite(t))){if(Math.floor(t)===t){var c=t>=oi&&t<=si;if(t>=ii&&t<=ni)return{$numberInt:t.toString()};if(c)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||un(t)){var d=t.flags;if(void 0===d){var p=t.toString().match(/[gimuy]*$/);p&&(d=p[0])}return new Qn(t.source,d).toExtendedJSON(e)}return null!=t&&"object"==typeof t?function(t,e){if(null==t||"object"!=typeof t)throw new Qr("not an object instance");var r=t._bsontype;if(void 0===r){var n={};for(var i in t){e.seenObjects.push({propertyName:i,obj:null});try{var s=li(t[i],e);"__proto__"===i?Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):n[i]=s}finally{e.seenObjects.pop()}}return n}if(ri(t)){var o=t;if("function"!=typeof o.toExtendedJSON){var a=di[t._bsontype];if(!a)throw new tn("Unrecognized or invalid _bsontype: "+t._bsontype);o=a(o)}return"Code"===r&&o.scope?o=new xn(o.code,li(o.scope,e)):"DBRef"===r&&o.oid&&(o=new En(li(o.collection,e),li(o.oid,e),li(o.db,e),li(o.fields,e))),o.toExtendedJSON(e)}throw new Qr("_bsontype must be a string, but was: "+typeof r)}(t,e):t}var fi,ci,di={Binary:function(t){return new _n(t.value(),t.sub_type)},Code:function(t){return new xn(t.code,t.scope)},DBRef:function(t){return new En(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new Hn(t.bytes)},Double:function(t){return new Wn(t.value)},Int32:function(t){return new Vn(t.value)},Long:function(t){return In.fromBits(null!=t.low?t.low:t.low_,null!=t.low?t.high:t.high_,null!=t.low?t.unsigned:t.unsigned_)},MaxKey:function(){return new Yn},MinKey:function(){return new Jn},ObjectID:function(t){return new Xn(t)},ObjectId:function(t){return new Xn(t)},BSONRegExp:function(t){return new Qn(t.pattern,t.options)},Symbol:function(t){return new ti(t.value)},Timestamp:function(t){return ei.fromBits(t.low,t.high)}};!function(t){function e(t,e){var r=Object.assign({},{relaxed:!0,legacy:!1},e);return"boolean"==typeof r.relaxed&&(r.strict=!r.relaxed),"boolean"==typeof r.strict&&(r.relaxed=!r.strict),JSON.parse(t,(function(t,e){if(-1!==t.indexOf("\0"))throw new Qr("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(t)));return hi(e,r)}))}function r(t,e,r,n){null!=r&&"object"==typeof r&&(n=r,r=0),null==e||"object"!=typeof e||Array.isArray(e)||(n=e,e=void 0,r=0);var i=li(t,Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(i,e,r)}t.parse=e,t.stringify=r,t.serialize=function(t,e){return e=e||{},JSON.parse(r(t,e))},t.deserialize=function(t,r){return r=r||{},e(JSON.stringify(t),r)}}(fi||(fi={}));var pi=rn();function gi(t,e,r){for(var n=0,i=e;i<r;i+=1){var s=t[i];if(n){if(128!=(192&s))return!1;n-=1}else if(128&s)if(192==(224&s))n=1;else if(224==(240&s))n=2;else{if(240!=(248&s))return!1;n=3}}return!n}ci=pi.Map?pi.Map:function(){function t(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var e=0;e<t.length;e++)if(null!=t[e]){var r=t[e],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(t){var e=this._values[t];return null!=e&&(delete this._values[t],this._keys.splice(e.i,1),!0)},t.prototype.entries=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?[r,t._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(t,e){e=e||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];t.call(e,this._values[n].v,n,e)}},t.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},t.prototype.has=function(t){return null!=this._values[t]},t.prototype.keys=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(t,e){return this._values[t]?(this._values[t].v=e,this):(this._keys.push(t),this._values[t]={v:e,i:this._keys.length-1},this)},t.prototype.values=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?t._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();var mi=In.fromNumber(wn),yi=In.fromNumber(bn),wi={};function bi(t,e,r){var n=(e=null==e?{}:e)&&e.index?e.index:0,i=t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24;if(i<5)throw new Qr("bson size must be >= 5, is ".concat(i));if(e.allowObjectSmallerThanBufferSize&&t.length<i)throw new Qr("buffer length ".concat(t.length," must be >= bson size ").concat(i));if(!e.allowObjectSmallerThanBufferSize&&t.length!==i)throw new Qr("buffer length ".concat(t.length," must === bson size ").concat(i));if(i+n>t.byteLength)throw new Qr("(bson size ".concat(i," + options.index ").concat(n," must be <= buffer length ").concat(t.byteLength,")"));if(0!==t[n+i-1])throw new Qr("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return vi(t,n,e,r)}var _i=/^\$ref$|^\$id$|^\$db$/;function vi(t,e,r,n){void 0===n&&(n=!1);var i,s=null!=r.evalFunctions&&r.evalFunctions,o=null!=r.cacheFunctions&&r.cacheFunctions,a=null==r.fieldsAsRaw?null:r.fieldsAsRaw,h=null!=r.raw&&r.raw,u="boolean"==typeof r.bsonRegExp&&r.bsonRegExp,l=null!=r.promoteBuffers&&r.promoteBuffers,f=null==r.promoteLongs||r.promoteLongs,c=null==r.promoteValues||r.promoteValues,d=null==r.validation?{utf8:!0}:r.validation,p=!0,g=new Set,m=d.utf8;if("boolean"==typeof m)i=m;else{p=!1;var y=Object.keys(m).map((function(t){return m[t]}));if(0===y.length)throw new Qr("UTF-8 validation setting cannot be empty");if("boolean"!=typeof y[0])throw new Qr("Invalid UTF-8 validation option, must specify boolean values");if(i=y[0],!y.every((function(t){return t===i})))throw new Qr("Invalid UTF-8 validation option - keys must be all true or all false")}if(!p)for(var w=0,b=Object.keys(m);w<b.length;w++){var _=b[w];g.add(_)}var v=e;if(t.length<5)throw new Qr("corrupt bson message < 5 bytes long");var x=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;if(x<5||x>t.length)throw new Qr("corrupt bson message");for(var k=n?[]:{},E=0,S=!n&&null,B=new DataView(t.buffer,t.byteOffset,t.byteLength);;){var A=t[e++];if(0===A)break;for(var U=e;0!==t[U]&&U<t.length;)U++;if(U>=t.byteLength)throw new Qr("Bad BSON Document: illegal CString");var C,O=n?E++:t.toString("utf8",e,U);C=p||g.has(O)?i:!i,!1!==S&&"$"===O[0]&&(S=_i.test(O));var I=void 0;if(e=U+1,2===A){if((et=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||et>t.length-e||0!==t[e+et-1])throw new Qr("bad string length in bson");I=ki(t,e,e+et-1,C),e+=et}else if(7===A){var L=qr.alloc(12);t.copy(L,0,e,e+12),I=new Xn(L),e+=12}else if(16===A&&!1===c)I=new Vn(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24);else if(16===A)I=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;else if(1===A&&!1===c)I=new Wn(B.getFloat64(e,!0)),e+=8;else if(1===A)I=B.getFloat64(e,!0),e+=8;else if(9===A){var T=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,z=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;I=new Date(new In(T,z).toNumber())}else if(8===A){if(0!==t[e]&&1!==t[e])throw new Qr("illegal boolean type value");I=1===t[e++]}else if(3===A){var R=e;if((Q=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)<=0||Q>t.length-e)throw new Qr("bad embedded document length in bson");if(h)I=t.slice(e,e+Q);else{var N=r;p||(N=Xr(Xr({},r),{validation:{utf8:C}})),I=vi(t,R,N,!1)}e+=Q}else if(4===A){R=e;var F=r,P=e+(Q=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24);if(a&&a[O]){for(var D in F={},r)F[D]=r[D];F.raw=!0}if(p||(F=Xr(Xr({},F),{validation:{utf8:C}})),I=vi(t,R,F,!0),0!==t[(e+=Q)-1])throw new Qr("invalid array terminator byte");if(e!==P)throw new Qr("corrupted array bson")}else if(6===A)I=void 0;else if(10===A)I=null;else if(18===A){T=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,z=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var M=new In(T,z);I=f&&!0===c&&M.lessThanOrEqual(mi)&&M.greaterThanOrEqual(yi)?M.toNumber():M}else if(19===A){var j=qr.alloc(16);t.copy(j,0,e,e+16),e+=16;var Z=new Hn(j);I="toObject"in Z&&"function"==typeof Z.toObject?Z.toObject():Z}else if(5===A){var $=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,H=$,W=t[e++];if($<0)throw new Qr("Negative binary type element size found");if($>t.byteLength)throw new Qr("Binary type size larger than document size");if(null!=t.slice){if(W===_n.SUBTYPE_BYTE_ARRAY){if(($=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<0)throw new Qr("Negative binary type element size found for subtype 0x02");if($>H-4)throw new Qr("Binary type with subtype 0x02 contains too long binary size");if($<H-4)throw new Qr("Binary type with subtype 0x02 contains too short binary size")}l&&c?I=t.slice(e,e+$):(I=new _n(t.slice(e,e+$),W),4===W&&(I=I.toUUID()))}else{var V=qr.alloc($);if(W===_n.SUBTYPE_BYTE_ARRAY){if(($=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<0)throw new Qr("Negative binary type element size found for subtype 0x02");if($>H-4)throw new Qr("Binary type with subtype 0x02 contains too long binary size");if($<H-4)throw new Qr("Binary type with subtype 0x02 contains too short binary size")}for(U=0;U<$;U++)V[U]=t[e+U];I=l&&c?V:4===W?new _n(t.slice(e,e+$),W).toUUID():new _n(t.slice(e,e+$),W)}e+=$}else if(11===A&&!1===u){for(U=e;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new Qr("Bad BSON Document: illegal CString");var Y=t.toString("utf8",e,U);for(U=e=U+1;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new Qr("Bad BSON Document: illegal CString");var J=t.toString("utf8",e,U);e=U+1;var q=new Array(J.length);for(U=0;U<J.length;U++)switch(J[U]){case"m":q[U]="m";break;case"s":q[U]="g";break;case"i":q[U]="i"}I=new RegExp(Y,q.join(""))}else if(11===A&&!0===u){for(U=e;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new Qr("Bad BSON Document: illegal CString");for(Y=t.toString("utf8",e,U),U=e=U+1;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new Qr("Bad BSON Document: illegal CString");J=t.toString("utf8",e,U),e=U+1,I=new Qn(Y,J)}else if(14===A){if((et=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||et>t.length-e||0!==t[e+et-1])throw new Qr("bad string length in bson");var K=ki(t,e,e+et-1,C);I=c?K:new ti(K),e+=et}else if(17===A)T=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,z=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,I=new ei(T,z);else if(255===A)I=new Jn;else if(127===A)I=new Yn;else if(13===A){if((et=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||et>t.length-e||0!==t[e+et-1])throw new Qr("bad string length in bson");var G=ki(t,e,e+et-1,C);I=s?o?xi(G,wi,k):xi(G):new xn(G),e+=et}else if(15===A){var X=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;if(X<13)throw new Qr("code_w_scope total size shorter minimum expected length");if((et=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||et>t.length-e||0!==t[e+et-1])throw new Qr("bad string length in bson");G=ki(t,e,e+et-1,C),R=e+=et;var Q=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,tt=vi(t,R,r,!1);if(e+=Q,X<8+Q+et)throw new Qr("code_w_scope total size is too short, truncating scope");if(X>8+Q+et)throw new Qr("code_w_scope total size is too long, clips outer document");s?(I=o?xi(G,wi,k):xi(G)).scope=tt:I=new xn(G,tt)}else{if(12!==A)throw new Qr("Detected unknown BSON type ".concat(A.toString(16),' for fieldname "').concat(O,'"'));var et;if((et=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||et>t.length-e||0!==t[e+et-1])throw new Qr("bad string length in bson");if(null!=d&&d.utf8&&!gi(t,e,e+et-1))throw new Qr("Invalid UTF-8 string in BSON document");var rt=t.toString("utf8",e,e+et-1);e+=et;var nt=qr.alloc(12);t.copy(nt,0,e,e+12),L=new Xn(nt),e+=12,I=new En(rt,L)}"__proto__"===O?Object.defineProperty(k,O,{value:I,writable:!0,enumerable:!0,configurable:!0}):k[O]=I}if(x!==e-v){if(n)throw new Qr("corrupt array bson");throw new Qr("corrupt object bson")}if(!S)return k;if(kn(k)){var it=Object.assign({},k);return delete it.$ref,delete it.$id,delete it.$db,new En(k.$ref,k.$id,k.$db,it)}return k}function xi(t,e,r){return e?(null==e[t]&&(e[t]=new Function(t)),e[t].bind(r)):new Function(t)}function ki(t,e,r,n){var i=t.toString("utf8",e,r);if(n)for(var s=0;s<i.length;s++)if(65533===i.charCodeAt(s)){if(!gi(t,e,r))throw new Qr("Invalid UTF-8 string in BSON document");break}return i}var Ei=/\x00/,Si=new Set(["$db","$ref","$id","$clusterTime"]);function Bi(t,e,r,n,i){t[n++]=2;var s=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8");t[(n=n+s+1)-1]=0;var o=t.write(r,n+4,void 0,"utf8");return t[n+3]=o+1>>24&255,t[n+2]=o+1>>16&255,t[n+1]=o+1>>8&255,t[n]=o+1&255,n=n+4+o,t[n++]=0,n}var Ai=new Uint8Array(8),Ui=new DataView(Ai.buffer,Ai.byteOffset,Ai.byteLength);function Ci(t,e,r,n,i){return Number.isInteger(r)&&r>=-2147483648&&r<=2147483647?(t[n++]=16,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,t[n++]=255&r,t[n++]=r>>8&255,t[n++]=r>>16&255,t[n++]=r>>24&255):(t[n++]=1,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,Ui.setFloat64(0,r,!0),t.set(Ai,n),n+=8),n}function Oi(t,e,r,n,i){return t[n++]=10,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,n}function Ii(t,e,r,n,i){return t[n++]=8,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,t[n++]=r?1:0,n}function Li(t,e,r,n,i){t[n++]=9,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var s=In.fromNumber(r.getTime()),o=s.getLowBits(),a=s.getHighBits();return t[n++]=255&o,t[n++]=o>>8&255,t[n++]=o>>16&255,t[n++]=o>>24&255,t[n++]=255&a,t[n++]=a>>8&255,t[n++]=a>>16&255,t[n++]=a>>24&255,n}function Ti(t,e,r,n,i){if(t[n++]=11,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,r.source&&null!=r.source.match(Ei))throw Error("value "+r.source+" must not contain null bytes");return n+=t.write(r.source,n,void 0,"utf8"),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function zi(t,e,r,n,i){if(t[n++]=11,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,null!=r.pattern.match(Ei))throw Error("pattern "+r.pattern+" must not contain null bytes");return n+=t.write(r.pattern,n,void 0,"utf8"),t[n++]=0,n+=t.write(r.options.split("").sort().join(""),n,void 0,"utf8"),t[n++]=0,n}function Ri(t,e,r,n,i){return null===r?t[n++]=10:"MinKey"===r._bsontype?t[n++]=255:t[n++]=127,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,n}function Ni(t,e,r,n,i){if(t[n++]=7,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,"string"==typeof r.id)t.write(r.id,n,void 0,"binary");else{if(!on(r.id))throw new tn("object ["+JSON.stringify(r)+"] is not a valid ObjectId");t.set(r.id.subarray(0,12),n)}return n+12}function Fi(t,e,r,n,i){t[n++]=5,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var s=r.length;return t[n++]=255&s,t[n++]=s>>8&255,t[n++]=s>>16&255,t[n++]=s>>24&255,t[n++]=0,t.set(dn(r),n),n+s}function Pi(t,e,r,n,i,s,o,a,h,u){void 0===i&&(i=!1),void 0===s&&(s=0),void 0===o&&(o=!1),void 0===a&&(a=!0),void 0===h&&(h=!1),void 0===u&&(u=[]);for(var l=0;l<u.length;l++)if(u[l]===r)throw new Qr("cyclic dependency detected");u.push(r),t[n++]=Array.isArray(r)?4:3,n+=h?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var f=Ji(t,r,i,n,s+1,o,a,u);return u.pop(),f}function Di(t,e,r,n,i){return t[n++]=19,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,t.set(r.bytes.subarray(0,16),n),n+16}function Mi(t,e,r,n,i){t[n++]="Long"===r._bsontype?18:17,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var s=r.getLowBits(),o=r.getHighBits();return t[n++]=255&s,t[n++]=s>>8&255,t[n++]=s>>16&255,t[n++]=s>>24&255,t[n++]=255&o,t[n++]=o>>8&255,t[n++]=o>>16&255,t[n++]=o>>24&255,n}function ji(t,e,r,n,i){return r=r.valueOf(),t[n++]=16,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,t[n++]=255&r,t[n++]=r>>8&255,t[n++]=r>>16&255,t[n++]=r>>24&255,n}function Zi(t,e,r,n,i){return t[n++]=1,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,Ui.setFloat64(0,r.value,!0),t.set(Ai,n),n+8}function $i(t,e,r,n,i,s,o){t[n++]=13,n+=o?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var a=r.toString().replace("function(","function ("),h=t.write(a,n+4,void 0,"utf8")+1;return t[n]=255&h,t[n+1]=h>>8&255,t[n+2]=h>>16&255,t[n+3]=h>>24&255,n=n+4+h-1,t[n++]=0,n}function Hi(t,e,r,n,i,s,o,a,h){if(void 0===i&&(i=!1),void 0===s&&(s=0),void 0===o&&(o=!1),void 0===a&&(a=!0),void 0===h&&(h=!1),r.scope&&"object"==typeof r.scope){t[n++]=15,n+=h?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var u=n,l="string"==typeof r.code?r.code:r.code.toString();n+=4;var f=t.write(l,n+4,void 0,"utf8")+1;t[n]=255&f,t[n+1]=f>>8&255,t[n+2]=f>>16&255,t[n+3]=f>>24&255,t[n+4+f-1]=0,n=n+f+4;var c=Ji(t,r.scope,i,n,s+1,o,a);n=c-1;var d=c-u;t[u++]=255&d,t[u++]=d>>8&255,t[u++]=d>>16&255,t[u++]=d>>24&255,t[n++]=0}else{t[n++]=13,n+=h?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0,l=r.code.toString();var p=t.write(l,n+4,void 0,"utf8")+1;t[n]=255&p,t[n+1]=p>>8&255,t[n+2]=p>>16&255,t[n+3]=p>>24&255,n=n+4+p-1,t[n++]=0}return n}function Wi(t,e,r,n,i){t[n++]=5,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var s=r.value(!0),o=r.position;return r.sub_type===_n.SUBTYPE_BYTE_ARRAY&&(o+=4),t[n++]=255&o,t[n++]=o>>8&255,t[n++]=o>>16&255,t[n++]=o>>24&255,t[n++]=r.sub_type,r.sub_type===_n.SUBTYPE_BYTE_ARRAY&&(o-=4,t[n++]=255&o,t[n++]=o>>8&255,t[n++]=o>>16&255,t[n++]=o>>24&255),t.set(s,n),n+r.position}function Vi(t,e,r,n,i){t[n++]=14,n+=i?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var s=t.write(r.value,n+4,void 0,"utf8")+1;return t[n]=255&s,t[n+1]=s>>8&255,t[n+2]=s>>16&255,t[n+3]=s>>24&255,n=n+4+s-1,t[n++]=0,n}function Yi(t,e,r,n,i,s,o){t[n++]=3,n+=o?t.write(e,n,void 0,"ascii"):t.write(e,n,void 0,"utf8"),t[n++]=0;var a=n,h={$ref:r.collection||r.namespace,$id:r.oid};null!=r.db&&(h.$db=r.db);var u=Ji(t,h=Object.assign(h,r.fields),!1,n,i+1,s),l=u-a;return t[a++]=255&l,t[a++]=l>>8&255,t[a++]=l>>16&255,t[a++]=l>>24&255,u}function Ji(t,e,r,n,i,s,o,a){void 0===r&&(r=!1),void 0===n&&(n=0),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===o&&(o=!0),void 0===a&&(a=[]),n=n||0,(a=a||[]).push(e);var h,u=n+4;if(Array.isArray(e))for(var l=0;l<e.length;l++){var f="".concat(l);if("function"==typeof(null==(m=e[l])?void 0:m.toBSON)&&(m=m.toBSON()),"string"==typeof m)u=Bi(t,f,m,u,!0);else if("number"==typeof m)u=Ci(t,f,m,u,!0);else{if("bigint"==typeof m)throw new tn("Unsupported type BigInt, please use Decimal128");if("boolean"==typeof m)u=Ii(t,f,m,u,!0);else if(m instanceof Date||ln(m))u=Li(t,f,m,u,!0);else if(void 0===m)u=Oi(t,f,0,u,!0);else if(null===m)u=Oi(t,f,0,u,!0);else if("ObjectId"===m._bsontype||"ObjectID"===m._bsontype)u=Ni(t,f,m,u,!0);else if(on(m))u=Fi(t,f,m,u,!0);else if(m instanceof RegExp||un(m))u=Ti(t,f,m,u,!0);else if("object"==typeof m&&null==m._bsontype)u=Pi(t,f,m,u,r,i,s,o,!0,a);else if("object"==typeof m&&ri(m)&&"Decimal128"===m._bsontype)u=Di(t,f,m,u,!0);else if("Long"===m._bsontype||"Timestamp"===m._bsontype)u=Mi(t,f,m,u,!0);else if("Double"===m._bsontype)u=Zi(t,f,m,u,!0);else if("function"==typeof m&&s)u=$i(t,f,m,u,0,0,!0);else if("Code"===m._bsontype)u=Hi(t,f,m,u,r,i,s,o,!0);else if("Binary"===m._bsontype)u=Wi(t,f,m,u,!0);else if("Symbol"===m._bsontype)u=Vi(t,f,m,u,!0);else if("DBRef"===m._bsontype)u=Yi(t,f,m,u,i,s,!0);else if("BSONRegExp"===m._bsontype)u=zi(t,f,m,u,!0);else if("Int32"===m._bsontype)u=ji(t,f,m,u,!0);else if("MinKey"===m._bsontype||"MaxKey"===m._bsontype)u=Ri(t,f,m,u,!0);else if(void 0!==m._bsontype)throw new tn("Unrecognized or invalid _bsontype: ".concat(String(m._bsontype)))}}else if(e instanceof ci||(h=e,"[object Map]"===Object.prototype.toString.call(h)))for(var c=e.entries(),d=!1;!d;){var p=c.next();if(!(d=!!p.done)){f=p.value[0];var g=typeof(m=p.value[1]);if("string"==typeof f&&!Si.has(f)){if(null!=f.match(Ei))throw Error("key "+f+" must not contain null bytes");if(r){if("$"===f[0])throw Error("key "+f+" must not start with '$'");if(~f.indexOf("."))throw Error("key "+f+" must not contain '.'")}}if("string"===g)u=Bi(t,f,m,u);else if("number"===g)u=Ci(t,f,m,u);else{if("bigint"===g||an(m)||hn(m))throw new tn("Unsupported type BigInt, please use Decimal128");if("boolean"===g)u=Ii(t,f,m,u);else if(m instanceof Date||ln(m))u=Li(t,f,m,u);else if(null===m||void 0===m&&!1===o)u=Oi(t,f,0,u);else if("ObjectId"===m._bsontype||"ObjectID"===m._bsontype)u=Ni(t,f,m,u);else if(on(m))u=Fi(t,f,m,u);else if(m instanceof RegExp||un(m))u=Ti(t,f,m,u);else if("object"===g&&null==m._bsontype)u=Pi(t,f,m,u,r,i,s,o,!1,a);else if("object"===g&&"Decimal128"===m._bsontype)u=Di(t,f,m,u);else if("Long"===m._bsontype||"Timestamp"===m._bsontype)u=Mi(t,f,m,u);else if("Double"===m._bsontype)u=Zi(t,f,m,u);else if("Code"===m._bsontype)u=Hi(t,f,m,u,r,i,s,o);else if("function"==typeof m&&s)u=$i(t,f,m,u,0,0,s);else if("Binary"===m._bsontype)u=Wi(t,f,m,u);else if("Symbol"===m._bsontype)u=Vi(t,f,m,u);else if("DBRef"===m._bsontype)u=Yi(t,f,m,u,i,s);else if("BSONRegExp"===m._bsontype)u=zi(t,f,m,u);else if("Int32"===m._bsontype)u=ji(t,f,m,u);else if("MinKey"===m._bsontype||"MaxKey"===m._bsontype)u=Ri(t,f,m,u);else if(void 0!==m._bsontype)throw new tn("Unrecognized or invalid _bsontype: ".concat(String(m._bsontype)))}}}else{if("function"==typeof(null==e?void 0:e.toBSON)&&null!=(e=e.toBSON())&&"object"!=typeof e)throw new tn("toBSON function did not return an object");for(var f in e){var m;if("function"==typeof(null==(m=e[f])?void 0:m.toBSON)&&(m=m.toBSON()),g=typeof m,"string"==typeof f&&!Si.has(f)){if(null!=f.match(Ei))throw Error("key "+f+" must not contain null bytes");if(r){if("$"===f[0])throw Error("key "+f+" must not start with '$'");if(~f.indexOf("."))throw Error("key "+f+" must not contain '.'")}}if("string"===g)u=Bi(t,f,m,u);else if("number"===g)u=Ci(t,f,m,u);else{if("bigint"===g)throw new tn("Unsupported type BigInt, please use Decimal128");if("boolean"===g)u=Ii(t,f,m,u);else if(m instanceof Date||ln(m))u=Li(t,f,m,u);else if(void 0===m)!1===o&&(u=Oi(t,f,0,u));else if(null===m)u=Oi(t,f,0,u);else if("ObjectId"===m._bsontype||"ObjectID"===m._bsontype)u=Ni(t,f,m,u);else if(on(m))u=Fi(t,f,m,u);else if(m instanceof RegExp||un(m))u=Ti(t,f,m,u);else if("object"===g&&null==m._bsontype)u=Pi(t,f,m,u,r,i,s,o,!1,a);else if("object"===g&&"Decimal128"===m._bsontype)u=Di(t,f,m,u);else if("Long"===m._bsontype||"Timestamp"===m._bsontype)u=Mi(t,f,m,u);else if("Double"===m._bsontype)u=Zi(t,f,m,u);else if("Code"===m._bsontype)u=Hi(t,f,m,u,r,i,s,o);else if("function"==typeof m&&s)u=$i(t,f,m,u,0,0,s);else if("Binary"===m._bsontype)u=Wi(t,f,m,u);else if("Symbol"===m._bsontype)u=Vi(t,f,m,u);else if("DBRef"===m._bsontype)u=Yi(t,f,m,u,i,s);else if("BSONRegExp"===m._bsontype)u=zi(t,f,m,u);else if("Int32"===m._bsontype)u=ji(t,f,m,u);else if("MinKey"===m._bsontype||"MaxKey"===m._bsontype)u=Ri(t,f,m,u);else if(void 0!==m._bsontype)throw new tn("Unrecognized or invalid _bsontype: ".concat(String(m._bsontype)))}}}a.pop(),t[u++]=0;var y=u-n;return t[n++]=255&y,t[n++]=y>>8&255,t[n++]=y>>16&255,t[n++]=y>>24&255,u}var qi=17825792,Ki=qr.alloc(qi);var Gi=r(535),Xi=r(921),Qi=r(178),ts=r(891),es=r(458),rs=r(141),ns=r(830),is=r(763),ss=r(27),os=r(548),as=r(911);const hs=document.currentScript.src;class us extends t{constructor(t,e){super(),this.canvas=t,this.worker=new Worker(new URL("jsspeccy-worker.js",hs)),this.keyboardHandler=new Lr(this.worker),this.displayHandler=new a(this.canvas),this.audioHandler=new zr,this.isRunning=!1,this.isInitiallyPaused=!e.autoStart,this.autoLoadTapes=e.autoLoadTapes||!1,this.tapeAutoLoadMode=e.tapeAutoLoadMode||"default",this.proxyURL=e.proxyURL||"ws://localhost:5000",this.tapeIsPlaying=!1,this.tapeTrapsEnabled=!("tapeTrapsEnabled"in e)||e.tapeTrapsEnabled,this.msPerFrame=20,this.wsProxy=null,this.isExecutingFrame=!1,this.nextFrameTime=null,this.machineType=null;const r=localStorage.getItem("spectranetRom");this.spectranetRomSaveTimer=-1,this.spectranetRom=r?Uint8Array.from(atob(r),(t=>t.charCodeAt(0))):null,this.nextFileOpenID=0,this.fileOpenPromiseResolutions={},this.worker.onmessage=t=>{switch(t.data.message){case"ready":this.loadRoms().then((()=>{this.setMachine(e.machine||128),this.setTapeTraps(this.tapeTrapsEnabled);let t=this.getCookie("hm");t||(t=(Math.random()+1).toString(36).substring(6),this.setCookie("hm",t,90)),this.setMAC(t).then((()=>{e.tnfs?this.loadTNFS(e.tnfs).then((()=>{e.autoStart&&this.start()})):e.openUrl?this.openUrlList(e.openUrl).catch((t=>{alert(t)})).then((()=>{e.autoStart&&this.start()})):e.autoStart&&this.start()}))}));break;case"frameCompleted":if("audioBufferLeft"in t.data&&this.audioHandler.frameCompleted(t.data.audioBufferLeft,t.data.audioBufferRight),this.displayHandler.frameCompleted(t.data.frameBuffer),this.isRunning){const t=performance.now();t>this.nextFrameTime?(this.runFrame(),this.nextFrameTime=t+this.msPerFrame):this.isExecutingFrame=!1}else this.isExecutingFrame=!1;break;case"fileOpened":if("tape"==t.data.mediaType&&this.autoLoadTapes){const t={48:{default:"tapeloaders/tape_48.szx",usr0:"tapeloaders/tape_48.szx"},49:{default:"tapeloaders/tape_48.szx",usr0:"tapeloaders/tape_48.szx"},128:{default:"tapeloaders/tape_128.szx",usr0:"tapeloaders/tape_128_usr0.szx"},5:{default:"tapeloaders/tape_pentagon.szx",usr0:"tapeloaders/tape_pentagon_usr0.szx"}};this.openUrl(new URL(t[this.machineType][this.tapeAutoLoadMode],hs)),this.tapeTrapsEnabled||this.playTape()}this.fileOpenPromiseResolutions[t.data.id]({mediaType:t.data.mediaType}),"tape"==t.data.mediaType&&this.emit("openedTapeFile");break;case"playingTape":this.tapeIsPlaying=!0,this.emit("playingTape");break;case"stoppedTape":this.tapeIsPlaying=!1,this.emit("stoppedTape");break;case"sendToProxy":this.wsProxy.send(function(t,e){void 0===e&&(e={});var r="boolean"==typeof e.checkKeys&&e.checkKeys,n="boolean"==typeof e.serializeFunctions&&e.serializeFunctions,i="boolean"!=typeof e.ignoreUndefined||e.ignoreUndefined,s="number"==typeof e.minInternalBufferSize?e.minInternalBufferSize:qi;Ki.length<s&&(Ki=qr.alloc(s));var o=Ji(Ki,t,r,0,0,n,i,[]),a=qr.alloc(o);return Ki.copy(a,0,0,a.length),a}({m:t.data.method,a:t.data.args}));break;case"writeSpectranetROM":if(this.spectranetRom){const e=t.data.addr;this.spectranetRom[e]=t.data.val,this.saveSpectranetRom()}break;case"eraseSpectranetROM":if(this.spectranetRom){const e=t.data.from,r=t.data.to,n=t.data.val;for(let t=e;t<r;t++)this.spectranetRom[t]=n;this.saveSpectranetRom()}break;default:console.log("message received by host:",t.data)}};const n=this.worker;this.wsProxy=new WebSocket(this.proxyURL);const i=this;this.wsProxy.onopen=function(){console.log("Connected to WS proxy."),i.emit("success","Connected to proxy"),n.postMessage({message:"loadCore",baseUrl:hs})},this.wsProxy.onclose=function(t){i.emit("warning","No connection with proxy"),n.postMessage({message:"proxyTerm"})},this.wsProxy.onmessage=function(t){t.data.arrayBuffer().then((t=>{const e=function(t,e){return void 0===e&&(e={}),bi(t instanceof qr?t:dn(t),e)}(t);n.postMessage({message:"msg",method:e.m,args:e.a})}))}}saveSpectranetRom(){-1!==this.spectranetRomSaveTimer&&clearTimeout(this.spectranetRomSaveTimer),this.spectranetRomSaveTimer=setTimeout((()=>{localStorage.setItem("spectranetRom",i.lW.from(this.spectranetRom).toString("base64")),this.spectranetRomSaveTimer=-1}),1e3)}setCookie(t,e,r){var n=new Date;n.setDate(n.getDate()+r);var i=escape(e)+(null==r?"":"; expires="+n.toUTCString());document.cookie=t+"="+i}getCookie(t){var e,r,n,i=document.cookie.split(";");for(e=0;e<i.length;e++)if(r=i[e].substr(0,i[e].indexOf("=")),n=i[e].substr(i[e].indexOf("=")+1),(r=r.replace(/^\s+|\s+$/g,""))==t)return unescape(n)}start(){this.isRunning||(this.isRunning=!0,this.isInitiallyPaused=!1,this.nextFrameTime=performance.now(),this.keyboardHandler.start(),this.audioHandler.start(),this.emit("start"),window.requestAnimationFrame((t=>{this.runAnimationFrame(t)})))}pause(){this.isRunning&&(this.isRunning=!1,this.keyboardHandler.stop(),this.audioHandler.stop(),this.emit("pause"))}async loadRomData(t,e,r=0){this.worker.postMessage({message:"loadMemory",data:t,page:e,offset:r})}async loadRom(t,e,r=0){const n=await fetch(new URL(t,hs)),i=new Uint8Array(await n.arrayBuffer());return await this.loadRomData(i,e,r),i}async loadRoms(){await this.loadRom("roms/128-0.rom",32),await this.loadRom("roms/128-1.rom",36),await this.loadRom("roms/48.rom",40),await this.loadRom("roms/pentagon-0.rom",48),await this.loadRom("roms/trdos.rom",52),null==this.spectranetRom?this.spectranetRom=await this.loadRom("roms/spectranet.rom",88):await this.loadRomData(this.spectranetRom,88,0)}async setMAC(t){const e=new Uint8Array(6);for(let r=0;r<6;r++)e[r]=t.charCodeAt(r);await this.loadRomData(e,119,3848)}async loadTNFS(t){console.log("Mounting TNFS to: "+t);const e=new Uint8Array([28,0,255,1,22,0,129,1,0]);await this.loadRomData(e,119,0);const r=new Uint8Array(t.length+1);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);r[t.length]=0,await this.loadRomData(r,119,9)}runFrame(){this.isExecutingFrame=!0;const t=this.displayHandler.getNextFrameBuffer();if(this.audioHandler.isActive){const[e,r]=this.audioHandler.frameBuffers;this.worker.postMessage({message:"runFrame",frameBuffer:t,audioBufferLeft:e,audioBufferRight:r},[t,e,r])}else this.worker.postMessage({message:"runFrame",frameBuffer:t},[t])}runAnimationFrame(t){this.displayHandler.readyToShow()&&this.displayHandler.show(),this.isRunning&&(t>this.nextFrameTime&&!this.isExecutingFrame&&(this.runFrame(),this.nextFrameTime+=this.msPerFrame),window.requestAnimationFrame((t=>{this.runAnimationFrame(t)})))}setMachine(t){128!=t&&129!=t&&5!=t&&49!=t&&(t=48),this.worker.postMessage({message:"setMachineType",type:t}),this.machineType=t,this.emit("setMachine",t)}reset(){this.worker.postMessage({message:"reset"})}nmi(){this.worker.postMessage({message:"nmi"})}loadSnapshot(t){const e=this.nextFileOpenID++;return this.worker.postMessage({message:"loadSnapshot",id:e,snapshot:t}),this.emit("setMachine",t.model),new Promise(((t,r)=>{this.fileOpenPromiseResolutions[e]=t}))}openTAPFile(t){const e=this.nextFileOpenID++;return this.worker.postMessage({message:"openTAPFile",id:e,data:t}),new Promise(((t,r)=>{this.fileOpenPromiseResolutions[e]=t}))}openTZXFile(t){const e=this.nextFileOpenID++;return this.worker.postMessage({message:"openTZXFile",id:e,data:t}),new Promise(((t,r)=>{this.fileOpenPromiseResolutions[e]=t}))}getFileOpener(t){const e=t.toLowerCase();return e.endsWith(".z80")?t=>{const e=function(t){const e=new DataView(t),r=e.getUint8(10),n=e.getUint8(12),i=127&e.getUint8(11)|(1&n)<<7,s=e.getUint8(29),o={registers:{AF:e.getUint16(0,!1),BC:e.getUint16(2,!0),HL:e.getUint16(4,!0),PC:e.getUint16(6,!0),SP:e.getUint16(8,!0),IR:r<<8|i,DE:e.getUint16(13,!0),BC_:e.getUint16(15,!0),DE_:e.getUint16(17,!0),HL_:e.getUint16(19,!0),AF_:e.getUint16(21,!1),IY:e.getUint16(23,!0),IX:e.getUint16(25,!0),iff1:!!e.getUint8(27),iff2:!!e.getUint8(28),im:3&s},ulaState:{borderColour:(14&n)>>1},memoryPages:{}};if(0!==o.registers.PC){o.model=48;const e=Er(t,30,32&n,49152);o.memoryPages[5]=new Uint8Array(e.buffer,0,16384),o.memoryPages[2]=new Uint8Array(e.buffer,16384,16384),o.memoryPages[0]=new Uint8Array(e.buffer,32768,16384),o.tstates=0}else{const r=e.getUint16(30,!0),n=23==r;o.registers.PC=e.getUint16(32,!0);const i=e.getUint8(34),s=n?i<3:i<4;o.model=s?48:128,s||(o.ulaState.pagingFlags=e.getUint8(35));const a=(s?69888:70908)/4;o.tstates=((e.getUint8(57)+1)%4+1)*a-(e.getUint16(55,!0)+1),o.tstates>=4*a&&(o.tstates=0);let h,u=32+r;for(h=s?{4:2,5:0,8:5}:{3:0,4:1,5:2,6:3,7:4,8:5,9:6,10:7};u<t.byteLength;){let r=e.getUint16(u,!0),n=!0;65535==r&&(r=16384,n=!1);const i=e.getUint8(u+2);if(i in h){const e=h[i],r=Er(t,u+3,n,16384);o.memoryPages[e]=r}u+=r+3}}return o}(t);return this.loadSnapshot(e)}:e.endsWith(".szx")?t=>{const e=function(t){const e=new DataView(t),r=t.byteLength,n={memoryPages:{}};if("ZXST"!=Sr(e,0))throw"Not a valid SZX file";const i=e.getUint8(6);switch(i){case 1:n.model=48;break;case 2:case 3:n.model=128;break;case 7:n.model=5;break;default:throw"Unsupported machine type: "+i}let s=8;for(;s<r;){const r=Sr(e,s),i=e.getUint32(s+4,!0);switch(s+=8,r){case"Z80R":n.registers={AF:e.getUint16(s+0,!0),BC:e.getUint16(s+2,!0),DE:e.getUint16(s+4,!0),HL:e.getUint16(s+6,!0),AF_:e.getUint16(s+8,!0),BC_:e.getUint16(s+10,!0),DE_:e.getUint16(s+12,!0),HL_:e.getUint16(s+14,!0),IX:e.getUint16(s+16,!0),IY:e.getUint16(s+18,!0),SP:e.getUint16(s+20,!0),PC:e.getUint16(s+22,!0),IR:e.getUint16(s+24,!1),iff1:!!e.getUint8(s+26),iff2:!!e.getUint8(s+27),im:e.getUint8(s+28)},n.tstates=e.getUint32(s+29,!0),n.halted=!!(2&e.getUint8(s+37));break;case"SPCR":n.ulaState={borderColour:e.getUint8(s+0),pagingFlags:e.getUint8(s+1)};break;case"RAMP":const r=1&e.getUint16(s+0,!0),o=e.getUint8(s+2);if(r){const e=new Uint8Array(t,s+3,i-3),r=kr.inflate(e);n.memoryPages[o]=r}else{const e=new Uint8Array(t,s+3,16384);n.memoryPages[o]=e}}s+=i}return n}(t);return this.loadSnapshot(e)}:e.endsWith(".sna")?t=>{const e=function(t){let e=!1,r=null;const n=t.byteLength;let i;switch(n){case 131103:case 147487:e=!0;case 49179:if(i=new DataView(t,0,e?49182:n),r={model:e?128:48,registers:{},ulaState:{},memoryPages:{5:new Uint8Array(t,27,16384),2:new Uint8Array(t,16411,16384)},tstates:0},e){const e=7&i.getUint8(49181);r.memoryPages[e]=new Uint8Array(t,32795,16384);for(let e=0,n=49183;e<8;e++)void 0===r.memoryPages[e]&&(r.memoryPages[e]=new Uint8Array(t,n,16384),n+=16384)}else r.memoryPages[0]=new Uint8Array(t,32795,16384);if(r.registers.IR=i.getUint8(0)<<8|i.getUint8(20),r.registers.HL_=i.getUint16(1,!0),r.registers.DE_=i.getUint16(3,!0),r.registers.BC_=i.getUint16(5,!0),r.registers.AF_=i.getUint16(7,!0),r.registers.HL=i.getUint16(9,!0),r.registers.DE=i.getUint16(11,!0),r.registers.BC=i.getUint16(13,!0),r.registers.IY=i.getUint16(15,!0),r.registers.IX=i.getUint16(17,!0),r.registers.iff1=r.registers.iff2=(4&i.getUint8(19))>>2,r.registers.AF=i.getUint16(21,!0),e)r.registers.SP=i.getUint16(23,!0),r.registers.PC=i.getUint16(49179,!0),r.ulaState.pagingFlags=i.getUint8(49181);else{let t=i.getUint16(23,!0);const e=i.getUint8(t-16384+27);t=t+1&65535;const n=i.getUint8(t-16384+27);t=t+1&65535,r.registers.PC=n<<8|e,r.registers.SP=t}r.registers.im=i.getUint8(25),r.ulaState.borderColour=i.getUint8(26);break;default:throw"Cannot handle SNA snapshots of length "+n}return r}(t);return this.loadSnapshot(e)}:e.endsWith(".tap")?t=>{if(class{constructor(t){let e=0;this.blocks=[];for(var r=new DataView(t);e+1<t.byteLength;){const n=r.getUint16(e,!0);e+=2,this.blocks.push(new Uint8Array(t,e,n)),e+=n}this.nextBlockIndex=0,this.pulseGenerator=new Or((t=>{if(0===this.blocks.length)return!1;const e=this.blocks[this.nextBlockIndex];return this.nextBlockIndex=(this.nextBlockIndex+1)%this.blocks.length,128&e[0]?t.addSegment(new Br(2168,3223)):t.addSegment(new Br(2168,8063)),t.addSegment(new Ar([667,735])),t.addSegment(new Ur(e,855,1710,8)),t.addSegment(new Cr(1e3)),0!=this.nextBlockIndex}))}getNextLoadableBlock(){if(0===this.blocks.length)return null;const t=this.blocks[this.nextBlockIndex];return this.nextBlockIndex=(this.nextBlockIndex+1)%this.blocks.length,t}static isValid(t){let e=0;const r=new DataView(t);for(;e<t.byteLength;){if(e+1>=t.byteLength)return!1;e+=r.getUint16(e,!0)+2}return e==t.byteLength}}.isValid(t))return this.openTAPFile(t);alert("Invalid TAP file")}:e.endsWith(".tzx")?t=>{if(class{static isValid(t){const e=new DataView(t),r="ZXTape!";for(let t=0;t<r.length;t++)if(r.charCodeAt(t)!=e.getUint8(t))return!1;return!0}constructor(t){this.blocks=[];const e=new DataView(t);let r=10;for(;r<t.byteLength;){const n=e.getUint8(r);switch(r++,n){case 16:(()=>{const n=e.getUint16(r,!0);r+=2;const i=e.getUint16(r,!0);r+=2;const s=new Uint8Array(t,r,i);this.blocks.push({type:"StandardSpeedData",pause:n,data:s,generatePulses:t=>{128&s[0]?t.addSegment(new Br(2168,3223)):t.addSegment(new Br(2168,8063)),t.addSegment(new Ar([667,735])),t.addSegment(new Ur(s,855,1710,8)),n&&t.addSegment(new Cr(n))}}),r+=i})();break;case 17:(()=>{const n=e.getUint16(r,!0);r+=2;const i=e.getUint16(r,!0);r+=2;const s=e.getUint16(r,!0);r+=2;const o=e.getUint16(r,!0);r+=2;const a=e.getUint16(r,!0);r+=2;const h=e.getUint16(r,!0);r+=2;const u=e.getUint8(r);r+=1;const l=e.getUint16(r,!0);r+=2;const f=e.getUint16(r,!0)|e.getUint8(r+2)<<16;r+=3;const c=new Uint8Array(t,r,f);this.blocks.push({type:"TurboSpeedData",pilotPulseLength:n,syncPulse1Length:i,syncPulse2Length:s,zeroBitLength:o,oneBitLength:a,pilotPulseCount:h,lastByteMask:u,pause:l,data:c,generatePulses:t=>{t.addSegment(new Br(n,h)),t.addSegment(new Ar([i,s])),t.addSegment(new Ur(c,o,a,u)),l&&t.addSegment(new Cr(l))}}),r+=f})();break;case 18:(()=>{const t=e.getUint16(r,!0);r+=2;const n=e.getUint16(r,!0);r+=2,this.blocks.push({type:"PureTone",pulseLength:t,pulseCount:n,generatePulses:e=>{e.addSegment(new Br(t,n))}})})();break;case 19:(()=>{const t=e.getUint8(r);r+=1;const n=[];for(let i=0;i<t;i++)n[i]=e.getUint16(r+2*i,!0);this.blocks.push({type:"PulseSequence",pulseLengths:n,generatePulses:t=>{t.addSegment(new Ar(n))}}),r+=2*t})();break;case 20:(()=>{const n=e.getUint16(r,!0);r+=2;const i=e.getUint16(r,!0);r+=2;const s=e.getUint8(r);r+=1;const o=e.getUint16(r,!0);r+=2;const a=e.getUint16(r,!0)|e.getUint8(r+2)<<16;r+=3;const h=new Uint8Array(t,r,a);this.blocks.push({type:"PureData",zeroBitLength:n,oneBitLength:i,lastByteMask:s,pause:o,data:h,generatePulses:t=>{t.addSegment(new Ur(h,n,i,s)),o&&t.addSegment(new Cr(o))}}),r+=a})();break;case 21:(()=>{const n=e.getUint16(r,!0);r+=2;const i=e.getUint16(r,!0);r+=2;const s=e.getUint8(r);r+=1;const o=e.getUint16(r,!0)|e.getUint8(r+2)<<16;r+=3,this.blocks.push({type:"DirectRecording",tstatesPerSample:n,lastByteMask:s,pause:i,data:new Uint8Array(t,r,o)}),r+=o})();break;case 32:(()=>{const t=e.getUint16(r,!0);r+=2,this.blocks.push({type:"Pause",pause:t,generatePulses:e=>{e.addSegment(new Cr(t))}})})();break;case 33:(()=>{const n=e.getUint8(r);r+=1;const i=new Uint8Array(t,r,n);r+=n;const s=String.fromCharCode.apply(null,i);this.blocks.push({type:"GroupStart",name:s})})();break;case 34:(()=>{this.blocks.push({type:"GroupEnd"})})();break;case 35:(()=>{const t=e.getUint16(r,!0);r+=2,this.blocks.push({type:"JumpToBlock",offset:t})})();break;case 36:(()=>{const t=e.getUint16(r,!0);r+=2,this.blocks.push({type:"LoopStart",repeatCount:t})})();break;case 37:(()=>{this.blocks.push({type:"LoopEnd"})})();break;case 38:(()=>{const t=e.getUint16(r,!0);r+=2;const n=[];for(let i=0;i<t;i++)n[i]=e.getUint16(r+2*i,!0);this.blocks.push({type:"CallSequence",offsets:n}),r+=2*t})();break;case 39:(()=>{this.blocks.push({type:"ReturnFromSequence"})})();break;case 40:(()=>{const n=e.getUint16(r,!0);r+=2,this.blocks.push({type:"Select",data:new Uint8Array(t,r,n)}),r+=n})();break;case 48:(()=>{const n=e.getUint8(r);r+=1;const i=new Uint8Array(t,r,n);r+=n;const s=String.fromCharCode.apply(null,i);this.blocks.push({type:"TextDescription",text:s})})();break;case 49:(()=>{const n=e.getUint8(r);r+=1;const i=e.getUint8(r);r+=1;const s=new Uint8Array(t,r,i);r+=i;const o=String.fromCharCode.apply(null,s);this.blocks.push({type:"MessageBlock",displayTime:n,text:o})})();break;case 50:(()=>{const n=e.getUint16(r,!0);r+=2,this.blocks.push({type:"ArchiveInfo",data:new Uint8Array(t,r,n)}),r+=n})();break;case 51:(()=>{const n=3*e.getUint8(r);r+=1,this.blocks.push({type:"HardwareType",data:new Uint8Array(t,r,n)}),r+=n})();break;case 53:(()=>{const n=new Uint8Array(t,r,10);r+=10;const i=String.fromCharCode.apply(null,n),s=e.getUint32(r,!0);this.blocks.push({type:"CustomInfo",identifier:i,data:new Uint8Array(t,r,s)}),r+=s})();break;case 90:(()=>{r+=9,this.blocks.push({type:"Glue"})})();break;default:(()=>{const n=e.getUint32(r,!0);r+=4,this.blocks.push({type:"unknown",data:new Uint8Array(t,r,n)}),r+=n})()}}this.nextBlockIndex=0,this.loopToBlockIndex,this.repeatCount,this.callStack=[],this.pulseGenerator=new Or((t=>{const e=this.getNextMeaningfulBlock(!1);return!!e&&(e.generatePulses(t),!0)}))}getNextMeaningfulBlock(t){let e=0===this.nextBlockIndex;for(;;){if(this.nextBlockIndex>=this.blocks.length){if(e||!t)return null;this.nextBlockIndex=0,e=!0}var r=this.blocks[this.nextBlockIndex];switch(r.type){case"StandardSpeedData":case"TurboSpeedData":case"PureTone":case"PulseSequence":case"PureData":case"DirectRecording":case"Pause":return this.nextBlockIndex++,r;case"JumpToBlock":this.nextBlockIndex+=r.offset;break;case"LoopStart":this.loopToBlockIndex=this.nextBlockIndex+1,this.repeatCount=r.repeatCount,this.nextBlockIndex++;break;case"LoopEnd":this.repeatCount--,this.repeatCount>0?this.nextBlockIndex=this.loopToBlockIndex:this.nextBlockIndex++;break;case"CallSequence":this.callStack.unshift(this.nextBlockIndex+1);for(var n=r.offsets.length-1;n>=0;n--)this.callStack.unshift(this.nextBlockIndex+r.offsets[n]);this.nextBlockIndex=this.callStack.shift();break;case"ReturnFromSequence":this.nextBlockIndex=this.callStack.shift();break;default:this.nextBlockIndex++}}}getNextLoadableBlock(){for(;;){var t=this.getNextMeaningfulBlock(!0);if(!t)return null;if("StandardSpeedData"==t.type||"TurboSpeedData"==t.type)return t.data}}}.isValid(t))return this.openTZXFile(t);alert("Invalid TZX file")}:e.endsWith(".zip")?async e=>{const r=await n.loadAsync(e),i=[];if(r.forEach(((t,e)=>{if(t.startsWith("__MACOSX/"))return;const r=this.getFileOpener(t);if(r){const t=async()=>{const t=await e.async("arraybuffer");return r(t)};i.push(t)}})),1==i.length)return i[0]();throw 0==i.length?"No loadable files found inside ZIP file: "+t:"Multiple loadable files found inside ZIP file: "+t}:void 0}async openFile(t){const e=this.getFileOpener(t.name);if(e)return e(await t.arrayBuffer()).catch((t=>{alert(t)}));throw"Unrecognised file type: "+t.name}async openUrl(t){const e=this.getFileOpener(t.toString());if(e){const r=await fetch(t);return e(await r.arrayBuffer())}throw"Unrecognised file type: "+t.split("/").pop()}async openUrlList(t){if("string"==typeof t)return await this.openUrl(t);for(const e of t)await this.openUrl(e)}setAutoLoadTapes(t){this.autoLoadTapes=t,this.emit("setAutoLoadTapes",t)}setTapeTraps(t){this.tapeTrapsEnabled=t,this.worker.postMessage({message:"setTapeTraps",value:t}),this.emit("setTapeTraps",t)}playTape(){this.worker.postMessage({message:"playTape"})}stopTape(){this.worker.postMessage({message:"stopTape"})}exit(){this.pause(),this.worker.terminate()}}window.JSSpeccy=(t,r)=>{r=r||{};const n=document.createElement("canvas");n.width=320,n.height=240,n.style.imageRendering="pixelated";const i=new us(n,{machine:r.machine||128,autoStart:r.autoStart||!1,tnfs:r.tnfs,proxyURL:r.proxyURL,autoLoadTapes:r.autoLoadTapes||!1,tapeAutoLoadMode:r.tapeAutoLoadMode||"default",openUrl:r.openUrl,tapeTrapsEnabled:!("tapeTrapsEnabled"in r)||r.tapeTrapsEnabled}),s=new g(t,i,{zoom:r.zoom||1,sandbox:r.sandbox}),o=s.menuBar.addMenu("File");if(!r.sandbox){o.addItem("Open...",(()=>{E()})),o.addItem("Find games...",(()=>{S()}));const t=o.addItem("Auto-load tapes",(()=>{i.setAutoLoadTapes(!i.autoLoadTapes)})),e=()=>{i.autoLoadTapes?t.setCheckbox():t.unsetCheckbox()};i.on("setAutoLoadTapes",e),e()}const a=o.addItem("Instant tape loading",(()=>{i.setTapeTraps(!i.tapeTrapsEnabled)})),u=()=>{i.tapeTrapsEnabled?a.setCheckbox():a.unsetCheckbox()};i.on("setTapeTraps",u),u();const l=s.menuBar.addMenu("Machine"),f=l.addItem("Spectrum 48K",(()=>{i.setMachine(48)})),c=l.addItem("48K + Spectranet",(()=>{i.setMachine(49)})),d=l.addItem("Spectrum 128K",(()=>{i.setMachine(128)})),p=l.addItem("Pentagon 128",(()=>{i.setMachine(5)})),m=s.menuBar.addMenu("Display"),y={1:m.addItem("100%",(()=>s.setZoom(1))),2:m.addItem("200%",(()=>s.setZoom(2))),3:m.addItem("300%",(()=>s.setZoom(3)))},w=m.addItem("Fullscreen",(()=>{s.enterFullscreen()})),b=t=>{if("fullscreen"==t){w.setBullet();for(let t in y)y[t].unsetBullet()}else{w.unsetBullet();for(let e in y)parseInt(e)==t?y[e].setBullet():y[e].unsetBullet()}};s.on("setZoom",b),b(s.zoom),i.on("setMachine",(t=>{48==t?(f.setBullet(),c.unsetBullet(),d.unsetBullet(),p.unsetBullet()):49==t?(f.unsetBullet(),c.setBullet(),d.unsetBullet(),p.unsetBullet()):128==t?(f.unsetBullet(),c.unsetBullet(),d.setBullet(),p.unsetBullet()):(f.unsetBullet(),c.unsetBullet(),d.unsetBullet(),p.setBullet())})),r.sandbox||s.toolbar.addButton(Gi,{label:"Open file"},(()=>{E()})),s.toolbar.addButton(Xi,{label:"Reset"},(()=>{i.reset()}));const _=s.toolbar.addButton(h,{label:"Unpause"},(()=>{i.isRunning?i.pause():i.start()}));s.toolbar.addButton(Qi,{label:"Magic"},(()=>{i.nmi()})),s.toolbar.addButton(rs,{label:"Connect to TNFS"},(()=>{const t=prompt("Please enter TNFS server to connect to");t&&(window.location.search="?tnfs="+t)})),i.on("pause",(()=>{_.setIcon(h),_.setLabel("Unpause")})),i.on("start",(()=>{_.setIcon(ns),_.setLabel("Pause")}));const v=s.toolbar.addButton(os,{label:"Start tape"},(()=>{i.tapeIsPlaying?i.stopTape():i.playTape()}));v.disable();const x=s.toolbar.addLabel();x.disable(),s.menuBar.addMenu("Spectranet").addItem("Erase ROM",(()=>{localStorage.removeItem("spectranetRom"),location.reload()})),i.on("warning",(t=>{x.enable(ts,t,"#a01f1f")})),i.on("success",(t=>{x.enable(es,t,"#0f330c")})),i.on("openedTapeFile",(()=>{v.enable()})),i.on("playingTape",(()=>{v.setIcon(as),v.setLabel("Stop tape")})),i.on("stoppedTape",(()=>{v.setIcon(os),v.setLabel("Start tape")}));const k=s.toolbar.addButton(is,{label:"Enter full screen mode",align:"right"},(()=>{s.toggleFullscreen()}));s.on("setZoom",(t=>{"fullscreen"==t?(k.setIcon(ss),k.setLabel("Exit full screen mode")):(k.setIcon(is),k.setLabel("Enter full screen mode"))}));const E=()=>{e().then((t=>{const e=t[0];i.openFile(e).then((()=>{i.isInitiallyPaused&&i.start()})).catch((t=>{alert(t)}))}))},S=()=>{i.pause();const t=s.showDialog();t.innerHTML='\n            <label>Find games</label>\n            <form>\n                <input type="search">\n                <button type="submit">Search</button>\n            </form>\n            <div class="results">\n            </div>\n        ';const e=t.querySelector("input"),r=t.querySelector("button"),n=t.querySelector("form"),o=t.querySelector(".results");n.addEventListener("submit",(t=>{t.preventDefault(),r.innerText="Searching...";const n=(t,e)=>encodeURIComponent(t)+"="+encodeURIComponent(e),a="https://archive.org/advancedsearch.php?"+n("q",'collection:softwarelibrary_zx_spectrum title:"'+e.value.replace(/[^\w\s\-\']/,"")+'"')+"&"+n("fl[]","creator")+"&"+n("fl[]","identifier")+"&"+n("fl[]","title")+"&"+n("rows","50")+"&"+n("page","1")+"&"+n("output","json");fetch(a).then((t=>(r.innerText="Search",t.json()))).then((t=>{o.innerHTML='<ul></ul><p>- powered by <a href="https://archive.org/">Internet Archive</a></p>';const e=o.querySelector("ul");t.response.docs.forEach((t=>{const r=document.createElement("li");e.appendChild(r);const n=document.createElement("a");n.href="#",n.innerText=t.title;const o=document.createTextNode(" - "+t.creator);r.appendChild(n),r.appendChild(o),n.addEventListener("click",(e=>{e.preventDefault(),fetch("https://archive.org/metadata/"+t.identifier).then((t=>t.json())).then((e=>{let r=null;if(e.files.forEach((t=>{const e=t.name.split(".").pop().toLowerCase();"z80"!=e&&"sna"!=e&&"tap"!=e&&"tzx"!=e&&"szx"!=e||(r=t.name)})),r){const e="https://cors.archive.org/cors/"+t.identifier+"/"+r;i.openUrl(e).catch((t=>{alert(t)})).then((()=>{s.hideDialog(),i.start()}))}else alert("No loadable file found")}))}))}))}))})),e.focus()};return{setZoom:t=>{s.setZoom(t)},toggleFullscreen:()=>{s.toggleFullscreen()},enterFullscreen:()=>{s.enterFullscreen()},exitFullscreen:()=>{s.exitFullscreen()},setMachine:t=>{i.setMachine(t)},openFileDialog:()=>{E()},openUrl:t=>{i.openUrl(t).catch((t=>{alert(t)}))},exit:()=>{i.exit(),s.unload()}}}})()})();